/*
 * FullCalendar v2.2.7
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 * (c) 2015 Tanguy Pruvot
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","moment"],a)}else{a(jQuery,moment)}})(function(aL,A){var U={titleRangeSeparator:" \u2014 ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:false,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,weekNumbers:false,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:true,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:false,minDate:null,maxDate:null,firstDay:0,yearTitleFormat:"YYYY",yearFormat:"YYYY",isRTL:false,defaultButtonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"today",year:"year",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:false,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:0.75,dragRevertDuration:500,dragScroll:true,unselectAuto:true,dropAccept:"*",eventLimit:false,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:true,windowResizeDelay:200};var o={dayPopoverFormat:"dddd, MMMM D"};var ac={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var aZ=aL.fullCalendar={version:"2.2.7"};var az=aZ.views={};aL.fn.fullCalendar=function(a9){var a8=Array.prototype.slice.call(arguments,1);var ba=this;this.each(function(bd,bb){var bc=aL(bb);var bf=bc.data("fullCalendar");var be;if(typeof a9==="string"){if(bf&&aL.isFunction(bf[a9])){be=bf[a9].apply(bf,a8);if(!bd){ba=be}if(a9==="destroy"){bc.removeData("fullCalendar")}}}else{if(!bf){bf=new q(bc,a9);bc.data("fullCalendar",bf);bf.render()}}});return ba};function aE(a8){aW(U,a8)}function aW(ba){function a9(bb,bc){if(aL.isPlainObject(bc)&&aL.isPlainObject(ba[bb])&&!ad(bb)){ba[bb]=aW({},ba[bb],bc)}else{if(bc!==undefined){ba[bb]=bc}}}for(var a8=1;a8<arguments.length;a8++){aL.each(arguments[a8],a9)}return ba}function ad(a8){return/(Time|Duration)$/.test(a8)}var aN=aZ.langs={};aZ.datepickerLang=function(bb,a9,ba){var a8=aN[bb]||(aN[bb]={});a8.isRTL=ba.isRTL;a8.weekNumberTitle=ba.weekHeader;aL.each(ae,function(bc,bd){a8[bc]=bd(ba)});if(aL.datepicker){aL.datepicker.regional[a9]=aL.datepicker.regional[bb]=ba;aL.datepicker.regional.en=aL.datepicker.regional[""];aL.datepicker.setDefaults(ba)}};aZ.lang=function(bb,ba){var a8;var a9;a8=aN[bb]||(aN[bb]={});if(ba){aW(a8,ba)}a9=aa(bb);aL.each(l,function(bc,bd){if(a8[bc]===undefined){a8[bc]=bd(a9,a8)}});U.lang=bb};var ae={defaultButtonText:function(a8){return{prev:ag(a8.prevText),next:ag(a8.nextText),today:ag(a8.currentText)}},monthYearFormat:function(a8){return a8.showMonthAfterYear?"YYYY["+a8.yearSuffix+"] MMMM":"MMMM YYYY["+a8.yearSuffix+"]"}};var l={dayOfMonthFormat:function(a9,a8){var ba=a9.longDateFormat("l");ba=ba.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,"");if(a8.isRTL){ba+=" ddd"}else{ba="ddd "+ba}return ba},smallTimeFormat:function(a8){return a8.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(a8){return a8.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},noMeridiemTimeFormat:function(a8){return a8.longDateFormat("LT").replace(/\s*a$/i,"")}};function aa(a9){var a8=A.localeData||A.langData;return a8.call(A,a9)||a8.call(A,"en")}aZ.lang("en",o);aZ.intersectionToSeg=aJ;aZ.applyAll=O;aZ.debounce=a7;function aX(a9,a8){if(a8.left){a9.css({"border-left-width":1,"margin-left":a8.left-1})}if(a8.right){a9.css({"border-right-width":1,"margin-right":a8.right-1})}}function am(a8){a8.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function au(){aL("body").addClass("fc-not-allowed")}function B(){aL("body").removeClass("fc-not-allowed")}function H(bd,bc,a9){var ba=Math.floor(bc/bd.length);var a8=Math.floor(bc-ba*(bd.length-1));var be=[];var bf=[];var bb=[];var bg=0;c(bd);bd.each(function(bi,bj){var bk=bi===bd.length-1?a8:ba;var bh=aL(bj).outerHeight(true);if(bh<bk){be.push(bj);bf.push(bh);bb.push(aL(bj).height())}else{bg+=bh}});if(a9){bc-=bg;ba=Math.floor(bc/be.length);a8=Math.floor(bc-ba*(be.length-1))}aL(be).each(function(bj,bk){var bm=bj===be.length-1?a8:ba;var bi=bf[bj];var bl=bb[bj];var bh=bm-(bi-bl);if(bi<bm){aL(bk).height(bh)}})}function c(a8){a8.height("")}function K(a8){var a9=0;a8.find("> *").each(function(bb,bc){var ba=aL(bc).outerWidth();if(ba>a9){a9=ba}});a9++;a8.width(a9);return a9}function aY(a9,a8){a9.height(a8).addClass("fc-scroller");if(a9[0].scrollHeight-1>a9[0].clientHeight){return true}s(a9);return false}function s(a8){a8.height("").removeClass("fc-scroller")}function ar(a9){var a8=a9.css("position"),ba=a9.parents().filter(function(){var bb=aL(this);return(/(auto|scroll)/).test(bb.css("overflow")+bb.css("overflow-y")+bb.css("overflow-x"))}).eq(0);return a8==="fixed"||!ba.length?aL(a9[0].ownerDocument||document):ba}function j(a8){var ba=a8.offset().left;var bc=ba+a8.width();var a9=a8.children();var bb=a9.offset().left;var bd=bb+a9.outerWidth();return{left:bb-ba,right:bc-bd}}function W(a8){return a8.which==1&&!a8.ctrlKey}function aJ(bg,a9){var bc=bg.start;var ba=bg.end;var bf=a9.start;var bd=a9.end;var be,bh;var a8,bb;if(ba>bf&&bc<bd){if(bc>=bf){be=bc.clone();a8=true}else{be=bf.clone();a8=false}if(ba<=bd){bh=ba.clone();bb=true}else{bh=bd.clone();bb=false}return{start:be,end:bh,isStart:a8,isEnd:bb}}}function I(bc,a8){bc=bc||{};if(bc[a8]!==undefined){return bc[a8]}var bb=a8.split(/(?=[A-Z])/),ba=bb.length-1,a9;for(;ba>=0;ba--){a9=bc[bb[ba].toLowerCase()];if(a9!==undefined){return a9}}return bc["default"]}var ab=["sun","mon","tue","wed","thu","fri","sat"];var i=["year","month","week","day","hour","minute","second","millisecond"];function u(a9,a8){return A.duration({days:a9.clone().stripTime().diff(a8.clone().stripTime(),"days"),ms:a9.time()-a8.time()})}function V(a9,a8){return A.duration({days:a9.clone().stripTime().diff(a8.clone().stripTime(),"days")})}function N(bc,a8){var a9,ba;var bb;for(a9=0;a9<i.length;a9++){ba=i[a9];bb=m(ba,bc,a8);if(bb>=1&&Q(bb)){break}}return ba}function m(a9,ba,a8){if(a8!=null){return a8.diff(ba,a9,true)}else{if(A.isDuration(ba)){return ba.as(a9)}else{return ba.end.diff(ba.start,a9,true)}}}function L(a8){return Object.prototype.toString.call(a8)==="[object Date]"||a8 instanceof Date}function M(a8){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(a8)}var v={}.hasOwnProperty;function S(a8){var a9=function(){};a9.prototype=a8;return new a9()}function aU(ba,a9){for(var a8 in ba){if(aI(ba,a8)){a9[a8]=ba[a8]}}}function ap(bc,a9){var bb=["constructor","toString","valueOf"];var ba,a8;for(ba=0;ba<bb.length;ba++){a8=bb[ba];if(bc[a8]!==Object.prototype[a8]){a9[a8]=bc[a8]}}}function aI(a9,a8){return v.call(a9,a8)}function aC(a8){return/undefined|null|boolean|number|string/.test(aL.type(a8))}function O(bb,bc,a9){if(aL.isFunction(bb)){bb=[bb]}if(bb){var ba;var a8;for(ba=0;ba<bb.length;ba++){a8=bb[ba].apply(bc,a9)||a8}return a8}}function a5(){for(var a8=0;a8<arguments.length;a8++){if(arguments[a8]!==undefined){return arguments[a8]}}}function a3(a8){return(a8+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function ag(a8){return a8.replace(/&.*?;/g,"")}function aR(a8){return a8.charAt(0).toUpperCase()+a8.slice(1)}function ak(a9,a8){return a9-a8}function Q(a8){return a8%1===0}function a7(bb,bd){var be;var a9;var ba;var bc;var a8=function(){var bf=+new Date()-bc;if(bf<bd&&bf>0){be=setTimeout(a8,bd-bf)}else{be=null;bb.apply(ba,a9);if(!be){ba=a9=null}}};return function(){ba=this;a9=arguments;bc=+new Date();if(!be){be=setTimeout(a8,bd)}}}var w=/^\s*\d{4}-\d\d$/;var T=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;var X=A.fn;var aH=aL.extend({},X);var aM;var f;var ah;aZ.moment=function(){return x(arguments)};aZ.moment.utc=function(){var a8=x(arguments,true);if(a8.hasTime()){a8.utc()}return a8};aZ.moment.parseZone=function(){return x(arguments,true,true)};function x(be,bd,bc){var bg=be[0];var bb=be.length==1&&typeof bg==="string";var ba;var bf;var a8;var a9;if(A.isMoment(bg)){a9=A.apply(null,be);r(bg,a9)}else{if(L(bg)||bg===undefined){a9=A.apply(null,be)}else{ba=false;bf=false;if(bb){if(w.test(bg)){bg+="-01";be=[bg];ba=true;bf=true}else{if((a8=T.exec(bg))){ba=!a8[5];bf=true}}}else{if(aL.isArray(bg)){bf=true}}if(bd||ba){a9=A.utc.apply(A,be)}else{a9=A.apply(null,be)}if(ba){a9._ambigTime=true;a9._ambigZone=true}else{if(bc){if(bf){a9._ambigZone=true}else{if(bb){a9.zone(bg)}}}}}}a9._fullCalendar=true;return a9}X.clone=function(){var a8=aH.clone.apply(this,arguments);r(this,a8);if(this._fullCalendar){a8._fullCalendar=true}return a8};X.time=function(a9){if(!this._fullCalendar){return aH.time.apply(this,arguments)}if(a9==null){return A.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()})}else{this._ambigTime=false;if(!A.isDuration(a9)&&!A.isMoment(a9)){a9=A.duration(a9)}var a8=0;if(A.isDuration(a9)){a8=Math.floor(a9.asDays())*24}return this.hours(a8+a9.hours()).minutes(a9.minutes()).seconds(a9.seconds()).milliseconds(a9.milliseconds())}};X.stripTime=function(){var a8;if(!this._ambigTime){a8=this.toArray();this.utc();f(this,a8.slice(0,3));this._ambigTime=true;this._ambigZone=true}return this};X.hasTime=function(){return !this._ambigTime};X.stripZone=function(){var a8,a9;if(!this._ambigZone){a8=this.toArray();a9=this._ambigTime;this.utc();f(this,a8);this._ambigTime=a9||false;this._ambigZone=true}return this};X.hasZone=function(){return !this._ambigZone};X.local=function(){var a8=this.toArray();var a9=this._ambigZone;aH.local.apply(this,arguments);this._ambigTime=false;this._ambigZone=false;if(a9){ah(this,a8)}return this};X.utc=function(){aH.utc.apply(this,arguments);this._ambigTime=false;this._ambigZone=false;return this};aL.each(["zone","utcOffset"],function(a9,a8){if(aH[a8]){X[a8]=function(ba){if(ba!=null){this._ambigTime=false;this._ambigZone=false}return aH[a8].apply(this,arguments)}}});X.format=function(){if(this._fullCalendar&&arguments[0]){return F(this,arguments[0])}if(this._ambigTime){return e(this,"YYYY-MM-DD")}if(this._ambigZone){return e(this,"YYYY-MM-DD[T]HH:mm:ss")}return aH.format.apply(this,arguments)};X.toISOString=function(){if(this._ambigTime){return e(this,"YYYY-MM-DD")}if(this._ambigZone){return e(this,"YYYY-MM-DD[T]HH:mm:ss")}return aH.toISOString.apply(this,arguments)};X.isWithin=function(ba,a9){var a8=aG([this,ba,a9]);return a8[0]>=a8[1]&&a8[0]<a8[2]};X.isSame=function(ba,a9){var a8;if(!this._fullCalendar){return aH.isSame.apply(this,arguments)}if(a9){a8=aG([this,ba],true);return aH.isSame.call(a8[0],a8[1],a9)}else{ba=aZ.moment.parseZone(ba);return aH.isSame.call(this,ba)&&Boolean(this._ambigTime)===Boolean(ba._ambigTime)&&Boolean(this._ambigZone)===Boolean(ba._ambigZone)}};aL.each(["isBefore","isAfter"],function(a9,a8){X[a8]=function(bc,bb){var ba;if(!this._fullCalendar){return aH[a8].apply(this,arguments)}ba=aG([this,bc]);return aH[a8].call(ba[0],ba[1],bb)}});function aG(a9,bf){var bb=false;var be=false;var a8=a9.length;var ba=[];var bc,bd;for(bc=0;bc<a8;bc++){bd=a9[bc];if(!A.isMoment(bd)){bd=aZ.moment.parseZone(bd)}bb=bb||bd._ambigTime;be=be||bd._ambigZone;ba.push(bd)}for(bc=0;bc<a8;bc++){bd=ba[bc];if(!bf&&bb&&!bd._ambigTime){ba[bc]=bd.clone().stripTime()}else{if(be&&!bd._ambigZone){ba[bc]=bd.clone().stripZone()}}}return ba}function r(a9,a8){if(a9._ambigTime){a8._ambigTime=true}else{if(a8._ambigTime){a8._ambigTime=false}}if(a9._ambigZone){a8._ambigZone=true}else{if(a8._ambigZone){a8._ambigZone=false}}}function a4(a9,a8){a9.year(a8[0]||0).month(a8[1]||0).date(a8[2]||0).hours(a8[3]||0).minutes(a8[4]||0).seconds(a8[5]||0).milliseconds(a8[6]||0)}aM="_d" in A()&&"updateOffset" in A;f=aM?function(a9,a8){a9._d.setTime(Date.UTC.apply(Date,a8));A.updateOffset(a9,false)}:a4;ah=aM?function(a9,a8){a9._d.setTime(+new Date(a8[0]||0,a8[1]||0,a8[2]||0,a8[3]||0,a8[4]||0,a8[5]||0,a8[6]||0));A.updateOffset(a9,false)}:a4;function e(a9,a8){return aH.format.call(a9,a8)}function F(a9,a8){return a0(a9,t(a8))}function a0(a8,bb){var ba="";var a9;for(a9=0;a9<bb.length;a9++){ba+=Z(a8,bb[a9])}return ba}var d={t:function(a8){return e(a8,"a").charAt(0)},T:function(a8){return e(a8,"A").charAt(0)}};function Z(a9,a8){var ba;var bb;if(typeof a8==="string"){return a8}else{if((ba=a8.token)){if(d[ba]){return d[ba](a9)}return e(a9,ba)}else{if(a8.maybe){bb=a0(a9,a8.maybe);if(bb.match(/[1-9]/)){return bb}}}}return""}function P(bd,bb,a8,bc,a9){var ba;bd=aZ.moment.parseZone(bd);bb=aZ.moment.parseZone(bb);ba=(bd.localeData||bd.lang).call(bd);a8=ba.longDateFormat(a8)||a8;bc=bc||" - ";return ay(bd,bb,t(a8),bc,a9)}aZ.formatRange=P;function ay(bl,bj,bd,bc,a9){var bh;var bk;var bb="";var a8;var bf="";var bi;var bg="";var be="";var ba="";for(bk=0;bk<bd.length;bk++){bh=aK(bl,bj,bd[bk]);if(bh===false){break}bb+=bh}for(a8=bd.length-1;a8>bk;a8--){bh=aK(bl,bj,bd[a8]);if(bh===false){break}bf=bh+bf}for(bi=bk;bi<=a8;bi++){bg+=Z(bl,bd[bi]);be+=Z(bj,bd[bi])}if(bg||be){if(a9){ba=be+bc+bg}else{ba=bg+bc+be}}return bb+ba+bf}var aV={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"};function aK(bc,bb,a8){var a9;var ba;if(typeof a8==="string"){return a8}else{if((a9=a8.token)){ba=aV[a9.charAt(0)];if(ba&&bc.isSame(bb,ba)){return e(bc,a9)}}}return false}var a1={};function t(a8){if(a8 in a1){return a1[a8]}return(a1[a8]=aq(a8))}function aq(a9){var bb=[];var a8=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g;var ba;while((ba=a8.exec(a9))){if(ba[1]){bb.push(ba[1])}else{if(ba[2]){bb.push({maybe:aq(ba[2])})}else{if(ba[3]){bb.push({token:ba[3]})}else{if(ba[5]){bb.push(ba[5])}}}}}return bb}aZ.Class=aS;function aS(){}aS.extend=function(a8){var a9=this;var ba;a8=a8||{};if(aI(a8,"constructor")){ba=a8.constructor}if(typeof ba!=="function"){ba=a8.constructor=function(){a9.apply(this,arguments)}}ba.prototype=S(a9.prototype);aU(a8,ba.prototype);ap(a8,ba.prototype);aU(a9,ba);return ba};aS.mixin=function(a8){aU(a8.prototype||a8,this.prototype)};var k=aS.extend({isHidden:true,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(a8){this.options=a8||{}},show:function(){if(this.isHidden){if(!this.el){this.render()}this.el.show();this.position();this.isHidden=false;this.trigger("show")}},hide:function(){if(!this.isHidden){this.el.hide();this.isHidden=true;this.trigger("hide")}},render:function(){var a9=this;var a8=this.options;this.el=aL('<div class="fc-popover"/>').addClass(a8.className||"").css({top:0,left:0}).append(a8.content).appendTo(a8.parentEl);this.el.on("click",".fc-close",function(){a9.hide()});if(a8.autoHide){aL(document).on("mousedown",this.documentMousedownProxy=aL.proxy(this,"documentMousedown"))}},documentMousedown:function(a8){if(this.el&&!aL(a8.target).closest(this.el).length){this.hide()}},destroy:function(){this.hide();if(this.el){this.el.remove();this.el=null}aL(document).off("mousedown",this.documentMousedownProxy)},position:function(){var bi=this.options;var be=this.el.offsetParent().offset();var a8=this.el.outerWidth();var bg=this.el.outerHeight();var bf=aL(window);var bd=ar(this.el);var a9;var bb;var bh;var bc;var ba;bc=bi.top||0;if(bi.left!==undefined){ba=bi.left}else{if(bi.right!==undefined){ba=bi.right-a8}else{ba=0}}if(bd.is(window)||bd.is(document)){bd=bf;a9=0;bb=0}else{bh=bd.offset();a9=bh.top;bb=bh.left}a9+=bf.scrollTop();bb+=bf.scrollLeft();if(bi.viewportConstrain!==false){bc=Math.min(bc,a9+bd.outerHeight()-bg-this.margin);bc=Math.max(bc,a9+this.margin);ba=Math.min(ba,bb+bd.outerWidth()-a8-this.margin);ba=Math.max(ba,bb+this.margin)}this.el.css({top:bc-be.top,left:ba-be.left})},trigger:function(a8){if(this.options[a8]){this.options[a8].apply(this,Array.prototype.slice.call(arguments,1))}}});var ai=aS.extend({grid:null,rowCoords:null,colCoords:null,containerEl:null,minX:null,maxX:null,minY:null,maxY:null,constructor:function(a8){this.grid=a8},build:function(){this.rowCoords=this.grid.computeRowCoords();this.colCoords=this.grid.computeColCoords();this.computeBounds()},clear:function(){this.rowCoords=null;this.colCoords=null},getCell:function(bf,bc){var bh=this.rowCoords;var a9=this.colCoords;var ba=null;var be=null;var a8,bd;var bg=null;var bb=this.inBounds(bf,bc);if(!bb&&this.grid.view.name=="year"){aL.each(this.grid.view.dayGrids,function(bk,bi){var bj=bi.coordMap;bj.computeBounds();if(bj.inBounds(bf,bc)){bj.build();bg=bj.getCell(bf,bc);return false}});return bg}else{for(a8=0;a8<bh.length;a8++){bd=bh[a8];if(bc>=bd.top&&bc<bd.bottom){ba=a8;break}}for(a8=0;a8<a9.length;a8++){bd=a9[a8];if(bf>=bd.left&&bf<bd.right){be=a8;break}}if(ba!==null&&be!==null){bg=this.grid.getCell(ba,be);bg.grid=this.grid;return bg}}return null},computeBounds:function(){var a8;if(this.containerEl){a8=this.containerEl.offset();this.minX=a8.left;this.maxX=a8.left+this.containerEl.outerWidth();this.minY=a8.top;this.maxY=a8.top+this.containerEl.outerHeight()}},inBounds:function(a8,a9){if(this.containerEl){return a8>=this.minX&&a8<this.maxX&&a9>=this.minY&&a9<this.maxY}return true}});var E=aS.extend({coordMaps:null,constructor:function(a8){this.coordMaps=a8},build:function(){var a9=this.coordMaps;var a8;for(a8=0;a8<a9.length;a8++){a9[a8].build()}},getCell:function(a9,bc){var bb=this.coordMaps;var a8=null;var ba;for(ba=0;ba<bb.length&&!a8;ba++){a8=bb[ba].getCell(a9,bc)}return a8},clear:function(){var a9=this.coordMaps;var a8;for(a8=0;a8<a9.length;a8++){a9[a8].clear()}}});var aQ=aS.extend({coordMap:null,options:null,isListening:false,isDragging:false,origCell:null,cell:null,mouseX0:null,mouseY0:null,mousemoveProxy:null,mouseupProxy:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(a9,a8){this.coordMap=a9;this.options=a8||{}},mousedown:function(a8){if(W(a8)){a8.preventDefault();this.startListening(a8);if(!this.options.distance){this.startDrag(a8)}}},startListening:function(a9){var ba;var a8;if(!this.isListening){if(a9&&this.options.scroll){ba=ar(aL(a9.target));if(!ba.is(window)&&!ba.is(document)){this.scrollEl=ba;this.scrollHandlerProxy=a7(aL.proxy(this,"scrollHandler"),100);this.scrollEl.on("scroll",this.scrollHandlerProxy)}}this.computeCoords();if(a9){a8=this.getCell(a9);this.origCell=a8;this.mouseX0=a9.pageX;this.mouseY0=a9.pageY}aL(document).on("mousemove",this.mousemoveProxy=aL.proxy(this,"mousemove")).on("mouseup",this.mouseupProxy=aL.proxy(this,"mouseup")).on("selectstart",this.preventDefault);this.isListening=true;this.trigger("listenStart",a9)}},computeCoords:function(){this.coordMap.build();this.computeScrollBounds()},mousemove:function(a9){var ba;var a8;if(!this.isDragging){ba=this.options.distance||1;a8=Math.pow(a9.pageX-this.mouseX0,2)+Math.pow(a9.pageY-this.mouseY0,2);if(a8>=ba*ba){this.startDrag(a9)}}if(this.isDragging){this.drag(a9)}},startDrag:function(a9){var a8;if(!this.isListening){this.startListening()}if(!this.isDragging){this.isDragging=true;this.trigger("dragStart",a9);a8=this.getCell(a9);if(a8){this.cellOver(a8)}}},drag:function(a9){var a8;if(this.isDragging){a8=this.getCell(a9);if(!J(a8,this.cell)){if(this.cell){this.cellOut()}if(a8){this.cellOver(a8)}}this.dragScroll(a9)}},cellOver:function(a8){this.cell=a8;this.trigger("cellOver",a8,J(a8,this.origCell))},cellOut:function(){if(this.cell){this.trigger("cellOut",this.cell);this.cell=null}},mouseup:function(a8){this.stopDrag(a8);this.stopListening(a8)},stopDrag:function(a8){if(this.isDragging){this.stopScrolling();this.trigger("dragStop",a8);this.isDragging=false}},stopListening:function(a8){if(this.isListening){if(this.scrollEl){this.scrollEl.off("scroll",this.scrollHandlerProxy);this.scrollHandlerProxy=null}aL(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault);this.mousemoveProxy=null;this.mouseupProxy=null;this.isListening=false;this.trigger("listenStop",a8);this.origCell=this.cell=null;this.coordMap.clear()}},getCell:function(a8){return this.coordMap.getCell(a8.pageX,a8.pageY)},trigger:function(a8){if(this.options[a8]){this.options[a8].apply(this,Array.prototype.slice.call(arguments,1))}},preventDefault:function(a8){a8.preventDefault()},computeScrollBounds:function(){var a8=this.scrollEl;var a9;if(a8){a9=a8.offset();this.scrollBounds={top:a9.top,left:a9.left,bottom:a9.top+a8.outerHeight(),right:a9.left+a8.outerWidth()}}},dragScroll:function(be){var ba=this.scrollSensitivity;var a8=this.scrollBounds;var a9,bb;var bf,bg;var bd=0;var bc=0;if(a8){a9=(ba-(be.pageY-a8.top))/ba;bb=(ba-(a8.bottom-be.pageY))/ba;bf=(ba-(be.pageX-a8.left))/ba;bg=(ba-(a8.right-be.pageX))/ba;if(a9>=0&&a9<=1){bd=a9*this.scrollSpeed*-1}else{if(bb>=0&&bb<=1){bd=bb*this.scrollSpeed}}if(bf>=0&&bf<=1){bc=bf*this.scrollSpeed*-1}else{if(bg>=0&&bg<=1){bc=bg*this.scrollSpeed}}}this.setScrollVel(bd,bc)},setScrollVel:function(a9,a8){this.scrollTopVel=a9;this.scrollLeftVel=a8;this.constrainScrollVel();if((this.scrollTopVel||this.scrollLeftVel)&&!this.scrollIntervalId){this.scrollIntervalId=setInterval(aL.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs)}},constrainScrollVel:function(){var a8=this.scrollEl;if(this.scrollTopVel<0){if(a8.scrollTop()<=0){this.scrollTopVel=0}}else{if(this.scrollTopVel>0){if(a8.scrollTop()+a8[0].clientHeight>=a8[0].scrollHeight){this.scrollTopVel=0}}}if(this.scrollLeftVel<0){if(a8.scrollLeft()<=0){this.scrollLeftVel=0}}else{if(this.scrollLeftVel>0){if(a8.scrollLeft()+a8[0].clientWidth>=a8[0].scrollWidth){this.scrollLeftVel=0}}}},scrollIntervalFunc:function(){var a9=this.scrollEl;var a8=this.scrollIntervalMs/1000;if(this.scrollTopVel){a9.scrollTop(a9.scrollTop()+this.scrollTopVel*a8)}if(this.scrollLeftVel){a9.scrollLeft(a9.scrollLeft()+this.scrollLeftVel*a8)}this.constrainScrollVel();if(!this.scrollTopVel&&!this.scrollLeftVel){this.stopScrolling()}},stopScrolling:function(){if(this.scrollIntervalId){clearInterval(this.scrollIntervalId);this.scrollIntervalId=null;this.computeCoords()}},scrollHandler:function(){if(!this.scrollIntervalId){this.computeCoords()}}});function J(a9,a8){if(!a9&&!a8){return true}if(a9&&a8){return a9.grid===a8.grid&&a9.row===a8.row&&a9.col===a8.col}return false}var D=aS.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:false,isHidden:false,isAnimating:false,constructor:function(a8,a9){this.options=a9=a9||{};this.sourceEl=a8;this.parentEl=a9.parentEl?aL(a9.parentEl):a8.parent()},start:function(a8){if(!this.isFollowing){this.isFollowing=true;this.mouseY0=a8.pageY;this.mouseX0=a8.pageX;this.topDelta=0;this.leftDelta=0;if(!this.isHidden){this.updatePosition()}aL(document).on("mousemove",this.mousemoveProxy=aL.proxy(this,"mousemove"))}},stop:function(a9,bc){var bb=this;var ba=this.options.revertDuration;function a8(){this.isAnimating=false;bb.destroyEl();this.top0=this.left0=null;if(bc){bc()}}if(this.isFollowing&&!this.isAnimating){this.isFollowing=false;aL(document).off("mousemove",this.mousemoveProxy);if(a9&&ba&&!this.isHidden){this.isAnimating=true;this.el.animate({top:this.top0,left:this.left0},{duration:ba,complete:a8})}else{a8()}}},getEl:function(){var a8=this.el;if(!a8){this.sourceEl.width();a8=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)}return a8},destroyEl:function(){if(this.el){this.el.remove();this.el=null}},updatePosition:function(){var a9;var a8;this.getEl();if(this.top0===null){this.sourceEl.width();a9=this.sourceEl.offset();a8=this.el.offsetParent().offset();this.top0=a9.top-a8.top;this.left0=a9.left-a8.left}this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(a8){this.topDelta=a8.pageY-this.mouseY0;this.leftDelta=a8.pageX-this.mouseX0;if(!this.isHidden){this.updatePosition()}},hide:function(){if(!this.isHidden){this.isHidden=true;if(this.el){this.el.hide()}}},show:function(){if(this.isHidden){this.isHidden=false;this.updatePosition();this.getEl().show()}}});var Y=aS.extend({view:null,isRTL:null,cellHtml:"<td/>",constructor:function(a8){this.view=a8;this.isRTL=a8.opt("isRTL")},rowHtml:function(bc,bd){var a9=this.getHtmlRenderer("cell",bc);var bb="";var ba;var a8;bd=bd||0;for(ba=0;ba<this.colCnt;ba++){a8=this.getCell(bd,ba);bb+=a9(a8)}bb=this.bookendCells(bb,bc,bd);return"<tr>"+bb+"</tr>"},bookendCells:function(ba,bb,bd){var bc=this.getHtmlRenderer("intro",bb)(bd||0,this);var a8=this.getHtmlRenderer("outro",bb)(bd||0,this);var be=this.isRTL?a8:bc;var a9=this.isRTL?bc:a8;if(typeof ba==="string"){return be+ba+a9}else{return ba.prepend(be).append(a9)}},getHtmlRenderer:function(a9,ba){var a8=this.view;var be;var bb;var bd;var bc;be=a9+"Html";if(ba){bb=ba+aR(a9)+"Html"}if(bb&&(bc=a8[bb])){bd=a8}else{if(bb&&(bc=this[bb])){bd=this}else{if((bc=a8[be])){bd=a8}else{if((bc=this[be])){bd=this}}}}if(typeof bc==="function"){return function(){return bc.apply(bd,arguments)||""}}return function(){return bc||""}}});var aB=aZ.Grid=Y.extend({start:null,end:null,rowCnt:0,colCnt:0,rowData:null,colData:null,el:null,coordMap:null,elsByFill:null,documentDragStartProxy:null,colHeadFormat:null,eventTimeFormat:null,displayEventEnd:null,constructor:function(){Y.apply(this,arguments);this.coordMap=new ai(this);this.elsByFill={};this.documentDragStartProxy=aL.proxy(this,"documentDragStart")},render:function(){this.bindHandlers()},destroy:function(){this.unbindHandlers()},computeColHeadFormat:function(){},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventEnd:function(){return false},setRange:function(a9){var a8=this.view;this.start=a9.start.clone();this.end=a9.end.clone();this.rowData=[];this.colData=[];this.updateCells();this.colHeadFormat=a8.opt("columnFormat")||this.computeColHeadFormat();this.eventTimeFormat=a8.opt("timeFormat")||this.computeEventTimeFormat();this.displayEventEnd=a8.opt("displayEventEnd");if(this.displayEventEnd==null){this.displayEventEnd=this.computeDisplayEventEnd()}},updateCells:function(){},rangeToSegs:function(a8){},getCell:function(ba,a9){var a8;if(a9==null){if(typeof ba==="number"){a9=ba%this.colCnt;ba=Math.floor(ba/this.colCnt)}else{a9=ba.col;ba=ba.row}}a8={row:ba,col:a9};aL.extend(a8,this.getRowData(ba),this.getColData(a9));aL.extend(a8,this.computeCellRange(a8));return a8},computeCellRange:function(a8){},getRowData:function(a8){return this.rowData[a8]||{}},getColData:function(a8){return this.colData[a8]||{}},getRowEl:function(a8){},getColEl:function(a8){},getCellDayEl:function(a8){return this.getColEl(a8.col)||this.getRowEl(a8.row)},computeRowCoords:function(){var a8=[];var a9,ba;var bb;for(a9=0;a9<this.rowCnt;a9++){ba=this.getRowEl(a9);bb={top:ba.offset().top};if(a9>0){a8[a9-1].bottom=bb.top}a8.push(bb)}bb.bottom=bb.top+ba.outerHeight();return a8},computeColCoords:function(){var a8=[];var a9,ba;var bb;for(a9=0;a9<this.colCnt;a9++){ba=this.getColEl(a9);bb={left:ba.offset().left};if(a9>0){a8[a9-1].right=bb.left}a8.push(bb)}bb.right=bb.left+ba.outerWidth();return a8},bindHandlers:function(){var a8=this;this.el.on("mousedown",function(a9){if(!aL(a9.target).is(".fc-event-container *, .fc-more")&&!aL(a9.target).closest(".fc-popover").length){a8.dayMousedown(a9)}});this.bindSegHandlers();aL(document).on("dragstart",this.documentDragStartProxy)},unbindHandlers:function(){aL(document).off("dragstart",this.documentDragStartProxy)},dayMousedown:function(bc){var be=this;var ba=this.view;var a8=ba.opt("selectable");var a9;var bd;var bb=new aQ(this.coordMap,{scroll:ba.opt("dragScroll"),dragStart:function(){ba.unselect()},cellOver:function(bh,bg){var bf=bb.origCell;if(bf){a9=bg?bh:null;if(a8){bd=be.computeSelection(bf,bh);if(bd){be.renderSelection(bd)}else{au()}}}},cellOut:function(bf){a9=null;bd=null;be.destroySelection();B()},listenStop:function(bf){if(a9){ba.trigger("dayClick",be.getCellDayEl(a9),a9.start,bf)}if(bd){ba.reportSelection(bd,bf)}B()}});bb.mousedown(bc)},renderRangeHelper:function(a9,a8){var ba;ba=a8?S(a8.event):{};ba.start=a9.start.clone();ba.end=a9.end?a9.end.clone():null;ba.allDay=null;this.view.calendar.normalizeEventDateProps(ba);ba.className=(ba.className||[]).concat("fc-helper");if(!a8){ba.editable=false}this.renderHelper(ba,a8)},renderHelper:function(a9,a8){},destroyHelper:function(){},renderSelection:function(a8){if(this.view.name=="year"&&!a8.rendered){this.view.destroySelection();a8.rendered=true;this.view.renderSelection(a8,this)}this.renderHighlight(a8)},destroySelection:function(){this.destroyHighlight()},computeSelection:function(ba,a8){var bb=[ba.start,ba.end,a8.start,a8.end];var a9;bb.sort(ak);a9={start:bb[0].clone(),end:bb[3].clone()};if(!this.view.calendar.isSelectionRangeAllowed(a9)){return null}return a9},renderHighlight:function(a8){this.renderFill("highlight",this.rangeToSegs(a8))},destroyHighlight:function(){this.destroyFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(a9,a8){},destroyFill:function(a9){var a8=this.elsByFill[a9];if(a8){a8.remove();delete this.elsByFill[a9]}},renderFillSegEls:function(bd,a9){var be=this;var a8=this[bd+"SegEl"];var bc="";var bb=[];var ba;if(a9.length){for(ba=0;ba<a9.length;ba++){bc+=this.fillSegHtml(bd,a9[ba])}aL(bc).each(function(bg,bi){var bf=a9[bg];var bh=aL(bi);if(a8){bh=a8.call(be,bf,bh)}if(bh){bh=aL(bh);if(bh.is(be.fillSegTag)){bf.el=bh;bb.push(bf)}}})}return bb},fillSegTag:"div",fillSegHtml:function(bb,a8){var bd=this[bb+"SegClasses"];var a9=this[bb+"SegStyles"];var ba=bd?bd.call(this,a8):[];var bc=a9?a9.call(this,a8):"";return"<"+this.fillSegTag+(ba.length?' class="'+ba.join(" ")+'"':"")+(bc?' style="'+bc+'"':"")+" />"},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(a8){var a9=this.view;var ba=a8.start;return'<th class="fc-day-header '+a9.widgetHeaderClass+" fc-"+ab[ba.day()]+'">'+a3(ba.format(this.colHeadFormat))+"</th>"},bgCellHtml:function(a8){var a9=this.view;var ba=a8.start;var bb=this.getDayClasses(ba);bb.unshift("fc-day",a9.widgetContentClass);return'<td class="'+bb.join(" ")+'" data-date="'+ba.format("YYYY-MM-DD")+'"></td>'},getDayClasses:function(ba){var a8=this.view;var a9=a8.calendar.getNow().stripTime();var bb=["fc-"+ab[ba.day()]];if(a8.name==="month"&&ba.month()!=a8.intervalStart.month()){bb.push("fc-other-month")}if(ba.isSame(a9,"day")){bb.push("fc-today",a8.highlightStateClass)}else{if(ba<a9){bb.push("fc-past")}else{bb.push("fc-future")}}return bb}});aB.mixin({mousedOverSeg:null,isDraggingSeg:false,isResizingSeg:false,segs:null,renderEvents:function(bc){var a9=this.eventsToSegs(bc);var ba=[];var bd=[];var bb,a8;for(bb=0;bb<a9.length;bb++){a8=a9[bb];if(at(a8.event)){ba.push(a8)}else{bd.push(a8)}}ba=this.renderBgSegs(ba)||ba;bd=this.renderFgSegs(bd)||bd;this.segs=ba.concat(bd)},destroyEvents:function(){this.triggerSegMouseout();this.destroyFgSegs();this.destroyBgSegs();this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(a8){},destroyFgSegs:function(){},renderFgSegEls:function(ba,a9){var a8=this.view;var bd="";var bc=[];var bb;if(ba.length){for(bb=0;bb<ba.length;bb++){bd+=this.fgSegHtml(ba[bb],a9)}aL(bd).each(function(bf,bh){var be=ba[bf];var bg=a8.resolveEventEl(be.event,aL(bh));if(bg){bg.data("fc-seg",be);be.el=bg;bc.push(be)}})}return bc},fgSegHtml:function(a9,a8){},renderBgSegs:function(a8){return this.renderFill("bgEvent",a8)},destroyBgSegs:function(){this.destroyFill("bgEvent")},bgEventSegEl:function(a8,a9){return this.view.resolveEventEl(a8.event,a9)},bgEventSegClasses:function(a8){var a9=a8.event;var ba=a9.source||{};return["fc-bgevent"].concat(a9.className,ba.className||[])},bgEventSegStyles:function(a9){var a8=this.view;var bd=a9.event;var be=bd.source||{};var bb=bd.color;var bf=be.color;var bc=a8.opt("eventColor");var ba=bd.backgroundColor||bb||be.backgroundColor||bf||a8.opt("eventBackgroundColor")||bc;if(ba){return"background-color:"+ba}return""},businessHoursSegClasses:function(a8){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var a9=this;var a8=this.view;aL.each({mouseenter:function(ba,bb){a9.triggerSegMouseover(ba,bb)},mouseleave:function(ba,bb){a9.triggerSegMouseout(ba,bb)},click:function(ba,bb){return a8.trigger("eventClick",this,ba.event,bb)},mousedown:function(ba,bb){if(aL(bb.target).is(".fc-resizer")&&a8.isEventResizable(ba.event)){a9.segResizeMousedown(ba,bb)}else{if(a8.isEventDraggable(ba.event)){a9.segDragMousedown(ba,bb)}}}},function(ba,bb){a9.el.on(ba,".fc-event-container > *",function(bd){var bc=aL(this).data("fc-seg");if(bc&&!a9.isDraggingSeg&&!a9.isResizingSeg){return bb.call(this,bc,bd)}})})},triggerSegMouseover:function(a8,a9){if(!this.mousedOverSeg){this.mousedOverSeg=a8;this.view.trigger("eventMouseover",a8.el[0],a8.event,a9)}},triggerSegMouseout:function(a8,a9){a9=a9||{};if(this.mousedOverSeg){a8=a8||this.mousedOverSeg;this.mousedOverSeg=null;this.view.trigger("eventMouseout",a8.el[0],a8.event,a9)}},segDragMousedown:function(be,bi){var bh=this;var bj=this.view;var bb=be.el;var ba=be.event;var bg;if(bj.name=="year"){var bc=aL(bb).closest("td.fc-year-monthly-td");var bf=bc.closest("table").find(".fc-year-monthly-td");var bd=bf.index(bc);bj.dayGrid=bj.dayGrids[bd]}var a9=new D(be.el,{parentEl:bj.el,opacity:bj.opt("dragOpacity"),revertDuration:bj.opt("dragRevertDuration"),zIndex:2});var a8=new aQ(bj.coordMap,{distance:5,scroll:bj.opt("dragScroll"),listenStart:function(bk){a9.hide();a9.start(bk)},dragStart:function(bk){bh.triggerSegMouseout(be,bk);bh.isDraggingSeg=true;bj.hideEvent(ba);bj.trigger("eventDragStart",bb[0],ba,bk,{})},cellOver:function(bm,bl){var bk=be.cell||a8.origCell;bg=bh.computeEventDrop(bk,bm,ba);if(bg){if(bj.renderDrag(bg,be)){a9.hide()}else{a9.show()}if(bl){bg=null}}else{a9.show();au()}},cellOut:function(){bg=null;bj.destroyDrag();a9.show();B()},dragStop:function(bk){a9.stop(!bg,function(){bh.isDraggingSeg=false;bj.destroyDrag();bj.showEvent(ba);bj.trigger("eventDragStop",bb[0],ba,bk,{});if(bg){bj.reportEventDrop(ba,bg,bb,bk)}});B()},listenStop:function(){a9.stop()}});a8.mousedown(bi)},computeEventDrop:function(bf,ba,a8){var bg=bf.start;var bb=ba.start;var bh;var bd;var bc;var a9;var be;if(bg.hasTime()===bb.hasTime()){bh=u(bb,bg);bd=a8.start.clone().add(bh);if(a8.end===null){bc=null}else{bc=a8.end.clone().add(bh)}a9=a8.allDay}else{bd=bb.clone();bc=null;a9=!bb.hasTime()}be={start:bd,end:bc,allDay:a9};if(!this.view.calendar.isEventRangeAllowed(be,a8)){return null}return be},documentDragStart:function(bb,bc){var a8=this.view;var ba;var a9;if(a8.opt("droppable")){ba=aL(bb.target);a9=a8.opt("dropAccept");if(aL.isFunction(a9)?a9.call(ba[0],ba):ba.is(a9)){this.startExternalDrag(ba,bb,bc)}}},startExternalDrag:function(a9,bb,bc){var be=this;var bd=aj(a9);var a8;var ba;a8=new aQ(this.coordMap,{cellOver:function(bf){ba=be.computeExternalDrop(bf,bd);if(ba){be.renderDrag(ba)}else{au()}},cellOut:function(){ba=null;be.destroyDrag();B()}});aL(document).one("dragstop",function(bf,bg){be.destroyDrag();B();if(ba){be.view.reportExternalDrop(bd,ba,a9,bf,bg)}});a8.startDrag(bb)},computeExternalDrop:function(a8,ba){var a9={start:a8.start.clone(),end:null};if(ba.startTime&&!a9.start.hasTime()){a9.start.time(ba.startTime)}if(ba.duration){a9.end=a9.start.clone().add(ba.duration)}if(!this.view.calendar.isExternalDropRangeAllowed(a9,ba.eventProps)){return null}return a9},renderDrag:function(a9,a8){},destroyDrag:function(){},segResizeMousedown:function(bd,bg){var bf=this;var bh=this.view;var be=bh.calendar;var bb=bd.el;var a9=bd.event;var ba=a9.start;var bj=be.getEventEnd(a9);var bc;var a8;function bi(){bf.destroyEventResize();bh.showEvent(a9);B()}a8=new aQ(this.coordMap,{distance:5,scroll:bh.opt("dragScroll"),dragStart:function(bk){bf.triggerSegMouseout(bd,bk);bf.isResizingSeg=true;bh.trigger("eventResizeStart",bb[0],a9,bk,{})},cellOver:function(bk){bc=bk.end;if(!bc.isAfter(ba)){bc=ba.clone().add(u(bk.end,bk.start))}if(bc.isSame(bj)){bc=null}else{if(!be.isEventRangeAllowed({start:ba,end:bc},a9)){bc=null;au()}else{bf.renderEventResize({start:ba,end:bc},bd);if(bh.name=="year"){aL.each(bh.dayGrids,function(bm,bl){if(bl!==bf){bl.destroyEventResize();bl.renderEventResize({start:ba,end:bc},bd)}})}bh.hideEvent(a9)}}},cellOut:function(){bc=null;bi()},dragStop:function(bk){bf.isResizingSeg=false;bi();bh.trigger("eventResizeStop",bb[0],a9,bk,{});if(bc){bh.reportEventResize(a9,bc,bb,bk)}}});a8.mousedown(bg)},renderEventResize:function(a9,a8){},destroyEventResize:function(){},getEventTimeText:function(a9,a8){a8=a8||this.eventTimeFormat;if(a9.end&&this.displayEventEnd){return this.view.formatRange(a9,a8)}else{return a9.start.format(a8)}},getSegClasses:function(a8,ba,bc){var bb=a8.event;var a9=["fc-event",a8.isStart?"fc-start":"fc-not-start",a8.isEnd?"fc-end":"fc-not-end"].concat(bb.className,bb.source?bb.source.className:[]);if(ba){a9.push("fc-draggable")}if(bc){a9.push("fc-resizable")}return a9},getEventSkinCss:function(a9){var be=this.view;var a8=a9.source||{};var bf=a9.color;var bc=a8.color;var bb=be.opt("eventColor");var bg=a9.backgroundColor||bf||a8.backgroundColor||bc||be.opt("eventBackgroundColor")||bb;var ba=a9.borderColor||bf||a8.borderColor||bc||be.opt("eventBorderColor")||bb;var bh=a9.textColor||a8.textColor||be.opt("eventTextColor");var bd=[];if(bg){bd.push("background-color:"+bg)}if(ba){bd.push("border-color:"+ba)}if(bh){bd.push("color:"+bh)}return bd.join(";")},eventsToSegs:function(bc,ba){var a9=this.eventsToRanges(bc);var a8=[];var bb;for(bb=0;bb<a9.length;bb++){a8.push.apply(a8,this.eventRangeToSegs(a9[bb],ba))}return a8},eventsToRanges:function(a9){var bb=this;var ba=aF(a9);var a8=[];aL.each(ba,function(bd,bc){if(bc.length){a8.push.apply(a8,b(bc[0])?bb.eventsToInverseRanges(bc):bb.eventsToNormalRanges(bc))}});return a8},eventsToNormalRanges:function(bc){var be=this.view.calendar;var ba=[];var bb,bd;var a9,a8;for(bb=0;bb<bc.length;bb++){bd=bc[bb];a9=bd.start.clone().stripZone();a8=be.getEventEnd(bd).stripZone();ba.push({event:bd,start:a9,end:a8,eventStartMS:+a9,eventDurationMS:a8-a9})}return ba},eventsToInverseRanges:function(bh){var bd=this.view;var bc=bd.start.clone().stripZone();var bg=bd.end.clone().stripZone();var be=this.eventsToNormalRanges(bh);var a9=[];var bf=bh[0];var a8=bc;var ba,bb;be.sort(aO);for(ba=0;ba<be.length;ba++){bb=be[ba];if(bb.start>a8){a9.push({event:bf,start:a8,end:bb.start})}a8=bb.end}if(a8<bg){a9.push({event:bf,start:a8,end:bg})}return a9},eventRangeToSegs:function(bc,ba){var a9;var bb,a8;if(ba){a9=ba(bc)}else{a9=this.rangeToSegs(bc)}for(bb=0;bb<a9.length;bb++){a8=a9[bb];a8.event=bc.event;a8.eventStartMS=bc.eventStartMS;a8.eventDurationMS=bc.eventDurationMS}return a9}});function at(a9){var a8=ao(a9);return a8==="background"||a8==="inverse-background"}function b(a8){return ao(a8)==="inverse-background"}function ao(a8){return a5((a8.source||{}).rendering,a8.rendering)}function aF(a9){var ba={};var a8,bb;for(a8=0;a8<a9.length;a8++){bb=a9[a8];(ba[bb._id]||(ba[bb._id]=[])).push(bb)}return ba}function aO(a9,a8){return a9.eventStartMS-a8.eventStartMS}function z(a9,a8){return a9.eventStartMS-a8.eventStartMS||a8.eventDurationMS-a9.eventDurationMS||a8.event.allDay-a9.event.allDay||(a9.event.title||"").localeCompare(a8.event.title)}aZ.compareSegs=z;aZ.dataAttrPrefix="";function aj(ba){var bc=aZ.dataAttrPrefix;var bb;var a9;var bd;var a8;if(bc){bc+="-"}bb=ba.data(bc+"event")||null;if(bb){if(typeof bb==="object"){bb=aL.extend({},bb)}else{bb={}}a9=bb.start;if(a9==null){a9=bb.time}bd=bb.duration;a8=bb.stick;delete bb.start;delete bb.time;delete bb.duration;delete bb.stick}if(a9==null){a9=ba.data(bc+"start")}if(a9==null){a9=ba.data(bc+"time")}if(bd==null){bd=ba.data(bc+"duration")}if(a8==null){a8=ba.data(bc+"stick")}a9=a9!=null?A.duration(a9):null;bd=bd!=null?A.duration(bd):null;a8=Boolean(a8);return{eventProps:bb,startTime:a9,duration:bd,stick:a8}}var aT=aB.extend({numbersVisible:false,bottomCoordPadding:0,breakOnWeeks:null,cellDates:null,dayToCellOffsets:null,rowEls:null,dayEls:null,helperEls:null,render:function(a8){var bd=this.view;var bc=this.rowCnt;var be=this.colCnt;var a9=bc*be;var bb="";var bg;var ba,bf;for(bg=0;bg<bc;bg++){bb+=this.dayRowHtml(bg,a8)}this.el.html(bb);this.rowEls=this.el.find(".fc-row");this.dayEls=this.el.find(".fc-day");for(ba=0;ba<a9;ba++){bf=this.getCell(ba);bd.trigger("dayRender",null,bf.start,this.dayEls.eq(ba))}aB.prototype.render.call(this)},destroy:function(){this.destroySegPopover();aB.prototype.destroy.call(this)},dayRowHtml:function(bb,a9){var a8=this.view;var ba=["fc-row","fc-week",a8.widgetContentClass];if(a9){ba.push("fc-rigid")}return'<div class="'+ba.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",bb)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",bb)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(a8){return this.bgCellHtml(a8)},computeColHeadFormat:function(){if(this.rowCnt>1){return"ddd"}else{if(this.colCnt>1){return this.view.opt("dayOfMonthFormat")}else{return"dddd"}}},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return this.colCnt==1},updateCells:function(){var ba;var a8;var bb;var a9;this.updateCellDates();ba=this.cellDates;if(this.breakOnWeeks){a8=ba[0].day();for(a9=1;a9<ba.length;a9++){if(ba[a9].day()==a8){break}}bb=Math.ceil(ba.length/a9)}else{bb=1;a9=ba.length}this.rowCnt=bb;this.colCnt=a9},updateCellDates:function(){var a8=this.view;var a9=this.start.clone();var bb=[];var bc=-1;var ba=[];while(a9.isBefore(this.end)){if(a8.isHiddenDay(a9)){ba.push(bc+0.5)}else{bc++;ba.push(bc);bb.push(a9.clone())}a9.add(1,"days")}this.cellDates=bb;this.dayToCellOffsets=ba},computeCellRange:function(a8){var bb=this.colCnt;var ba=a8.row*bb+(this.isRTL?bb-a8.col-1:a8.col);var bc=this.cellDates[ba].clone();var a9=bc.clone().add(1,"day");return{start:bc,end:a9}},getRowEl:function(a8){return this.rowEls.eq(a8)},getColEl:function(a8){return this.dayEls.eq(a8)},getCellDayEl:function(a8){return this.dayEls.eq(a8.row*this.colCnt+a8.col)},computeRowCoords:function(){var a8=aB.prototype.computeRowCoords.call(this);a8[a8.length-1].bottom+=this.bottomCoordPadding;return a8},rangeToSegs:function(be){var ba=this.isRTL;var bg=this.rowCnt;var bj=this.colCnt;var a9=[];var bd,bk;var bm;var bh,bi;var a8,bb;var bl,bf;var bc;be=this.view.computeDayRange(be);bd=this.dateToCellOffset(be.start);bk=this.dateToCellOffset(be.end.subtract(1,"days"));for(bm=0;bm<bg;bm++){bh=bm*bj;bi=bh+bj-1;bl=Math.max(bh,bd);bf=Math.min(bi,bk);bl=Math.ceil(bl);bf=Math.floor(bf);if(bl<=bf){a8=bl===bd;bb=bf===bk;bl-=bh;bf-=bh;bc={row:bm,isStart:a8,isEnd:bb};if(ba){bc.leftCol=bj-bf-1;bc.rightCol=bj-bl-1}else{bc.leftCol=bl;bc.rightCol=bf}a9.push(bc)}}return a9},dateToCellOffset:function(a9){var ba=this.dayToCellOffsets;var a8=a9.diff(this.start,"days");if(a8<0){return ba[0]-1}else{if(a8>=ba.length){return ba[ba.length-1]+1}else{return ba[a8]}}},renderDrag:function(ba,a8){var a9;this.renderHighlight(this.view.calendar.ensureVisibleEventRange(ba));if(a8&&!a8.el.closest(this.view.el).length){this.renderRangeHelper(ba,a8);a9=this.view.opt("dragOpacity");if(a9!==undefined){this.helperEls.css("opacity",a9)}return true}},destroyDrag:function(){this.destroyHighlight();this.destroyHelper()},renderEventResize:function(a9,a8){this.renderHighlight(a9);this.renderRangeHelper(a9,a8)},destroyEventResize:function(){this.destroyHighlight();this.destroyHelper()},renderHelper:function(bc,ba){var a8=[];var a9=this.eventsToSegs([bc]);var bb;a9=this.renderFgSegEls(a9);bb=this.renderSegRows(a9);this.rowEls.each(function(bh,bf){var be=aL(bf);var bg=aL('<div class="fc-helper-skeleton"><table/></div>');var bd;if(ba&&ba.row===bh){bd=ba.el.position().top}else{bd=be.find(".fc-content-skeleton tbody").position().top}bg.css("top",bd).find("table").append(bb[bh].tbodyEl);be.append(bg);a8.push(bg[0])});this.helperEls=aL(a8)},destroyHelper:function(){if(this.helperEls){this.helperEls.remove();this.helperEls=null}},fillSegTag:"td",renderFill:function(bc,a9){var ba=[];var bb,a8;var bd;a9=this.renderFillSegEls(bc,a9);for(bb=0;bb<a9.length;bb++){a8=a9[bb];bd=this.renderFillRow(bc,a8);this.rowEls.eq(a8.row).append(bd);ba.push(bd[0])}this.elsByFill[bc]=aL(ba);return a9},renderFillRow:function(ba,a8){var a9=this.colCnt;var bd=a8.leftCol;var bc=a8.rightCol+1;var be;var bb;be=aL('<div class="fc-'+ba.toLowerCase()+'-skeleton"><table><tr/></table></div>');bb=be.find("tr");if(bd>0){bb.append('<td colspan="'+bd+'"/>')}bb.append(a8.el.attr("colspan",bc-bd));if(bc<a9){bb.append('<td colspan="'+(a9-bc)+'"/>')}this.bookendCells(bb,ba);return be}});aT.mixin({rowStructs:null,destroyEvents:function(){this.destroySegPopover();aB.prototype.destroyEvents.apply(this,arguments)},getEventSegs:function(){return aB.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(a8){var a9=aL.grep(a8,function(ba){return ba.event.allDay});return aB.prototype.renderBgSegs.call(this,a9)},renderFgSegs:function(a8){var a9;a8=this.renderFgSegEls(a8);a9=this.rowStructs=this.renderSegRows(a8);this.rowEls.each(function(ba,bb){if(ba<a9.length){aL(bb).find(".fc-content-skeleton > table").append(a9[ba].tbodyEl)}});return a8},destroyFgSegs:function(){var a9=this.rowStructs||[];var a8;while((a8=a9.pop())){a8.tbodyEl.remove()}this.rowStructs=null},renderSegRows:function(a9){var ba=[];var a8;var bb;a8=this.groupSegRows(a9);for(bb=0;bb<a8.length;bb++){ba.push(this.renderSegRow(bb,a8[bb]))}return ba},fgSegHtml:function(bd,ba){var bg=this.view;var a9=bd.event;var a8=bg.isEventDraggable(a9);var bb=!ba&&a9.allDay&&bd.isEnd&&bg.isEventResizable(a9);var bc=this.getSegClasses(bd,a8,bb);var bh=this.getEventSkinCss(a9);var bf="";var be;bc.unshift("fc-day-grid-event");if(!a9.allDay&&bd.isStart&&!a9.hideTime){bf='<span class="fc-time">'+a3(this.getEventTimeText(a9))+"</span>"}be='<span class="fc-title">'+(a3(a9.title||"")||"&nbsp;")+"</span>";return'<a class="'+bc.join(" ")+'"'+(a9.url?' href="'+a3(a9.url)+'"':"")+(bh?' style="'+bh+'"':"")+'><div class="fc-content">'+(this.isRTL?be+" "+bf:bf+" "+be)+"</div>"+(bb?'<div class="fc-resizer"/>':"")+"</a>"},renderSegRow:function(bn,bo){var bl=this.colCnt;var bh=this.buildSegLevels(bo);var a8=Math.max(1,bh.length);var bg=aL("<tbody/>");var bc=[];var bi=[];var ba=[];var bf,bk;var a9;var bj;var be,bd;var bb;function bm(bp){while(a9<bp){bb=(ba[bf-1]||[])[a9];if(bb){bb.attr("rowspan",parseInt(bb.attr("rowspan")||1,10)+1)}else{bb=aL("<td/>");bj.append(bb)}bi[bf][a9]=bb;ba[bf][a9]=bb;a9++}}for(bf=0;bf<a8;bf++){bk=bh[bf];a9=0;bj=aL("<tr/>");bc.push([]);bi.push([]);ba.push([]);if(bk){for(be=0;be<bk.length;be++){bd=bk[be];bm(bd.leftCol);bb=aL('<td class="fc-event-container"/>').append(bd.el);if(bd.leftCol!=bd.rightCol){bb.attr("colspan",bd.rightCol-bd.leftCol+1)}else{ba[bf][a9]=bb}while(a9<=bd.rightCol){bi[bf][a9]=bb;bc[bf][a9]=bd;a9++}bj.append(bb)}}bm(bl);this.bookendCells(bj,"eventSkeleton");bg.append(bj)}return{row:bn,tbodyEl:bg,cellMatrix:bi,segMatrix:bc,segLevels:bh,segs:bo}},buildSegLevels:function(a9){var bc=[];var bb,a8;var ba;a9.sort(z);for(bb=0;bb<a9.length;bb++){a8=a9[bb];for(ba=0;ba<bc.length;ba++){if(!C(a8,bc[ba])){break}}a8.level=ba;(bc[ba]||(bc[ba]=[])).push(a8)}for(ba=0;ba<bc.length;ba++){bc[ba].sort(aA)}return bc},groupSegRows:function(a9){var a8=[];var ba;for(ba=0;ba<this.rowCnt;ba++){a8.push([])}for(ba=0;ba<a9.length;ba++){a8[a9[ba].row].push(a9[ba])}return a8}});function C(a8,bb){var a9,ba;for(a9=0;a9<bb.length;a9++){ba=bb[a9];if(ba.leftCol<=a8.rightCol&&ba.rightCol>=a8.leftCol){return true}}return false}function aA(a9,a8){return a9.leftCol-a8.leftCol}aT.mixin({segPopover:null,popoverSegs:null,destroySegPopover:function(){if(this.segPopover){this.segPopover.hide()}},limitRows:function(ba){var a8=this.rowStructs||[];var bb;var a9;for(bb=0;bb<a8.length;bb++){this.unlimitRow(bb);if(!ba){a9=false}else{if(typeof ba==="number"){a9=ba}else{a9=this.computeRowLevelLimit(bb)}}if(a9!==false){this.limitRow(bb,a9)}}},computeRowLevelLimit:function(bd){var a9=this.rowEls.eq(bd);var bc=a9.height();var a8=this.rowStructs[bd].tbodyEl.children();var ba,bb;for(ba=0;ba<a8.length;ba++){bb=a8.eq(ba).removeClass("fc-limited");if(bb.position().top+bb.outerHeight()>bc){return ba}}return false},limitRow:function(bh,bl){var bn=this;var bb=this.rowStructs[bh];var bg=[];var bf=0;var a8;var a9;var be;var bs;var bq,br;var bu;var bi;var ba;var bj,bt;var bd;var bo;var bc,bp,bm;function bk(bv){while(bf<bv){a8=bn.getCell(bh,bf);bu=bn.getCellSegs(a8,bl);if(bu.length){bj=be[bl-1][bf];bm=bn.renderMoreLink(a8,bu);bp=aL("<div/>").append(bm);bj.append(bp);bg.push(bp[0])}bf++}}if(bl&&bl<bb.segLevels.length){a9=bb.segLevels[bl-1];be=bb.cellMatrix;bs=bb.tbodyEl.children().slice(bl).addClass("fc-limited").get();for(bq=0;bq<a9.length;bq++){br=a9[bq];bk(br.leftCol);ba=[];bi=0;while(bf<=br.rightCol){a8=this.getCell(bh,bf);bu=this.getCellSegs(a8,bl);ba.push(bu);bi+=bu.length;bf++}if(bi){bj=be[bl-1][br.leftCol];bt=bj.attr("rowspan")||1;bd=[];for(bo=0;bo<ba.length;bo++){bc=aL('<td class="fc-more-cell"/>').attr("rowspan",bt);bu=ba[bo];a8=this.getCell(bh,br.leftCol+bo);bm=this.renderMoreLink(a8,[br].concat(bu));bp=aL("<div/>").append(bm);bc.append(bp);bd.push(bc[0]);bg.push(bc[0])}bj.addClass("fc-limited").after(aL(bd));bs.push(bj[0])}}bk(this.colCnt);bb.moreEls=aL(bg);bb.limitedEls=aL(bs)}},unlimitRow:function(a9){var a8=this.rowStructs[a9];if(a8.moreEls){a8.moreEls.remove();a8.moreEls=null}if(a8.limitedEls){a8.limitedEls.removeClass("fc-limited");a8.limitedEls=null}},renderMoreLink:function(a8,ba){var bb=this;var a9=this.view;return aL('<a class="fc-more"/>').text(this.getMoreLinkText(ba.length)).on("click",function(bg){var bj=a9.opt("eventLimitClick");var bd=a8.start;var bh=aL(this);var bi=bb.getCellDayEl(a8);var bc=bb.getCellSegs(a8);var be=bb.resliceDaySegs(bc,bd);var bf=bb.resliceDaySegs(ba,bd);if(typeof bj==="function"){bj=a9.trigger("eventLimitClick",null,{date:bd,dayEl:bi,moreEl:bh,segs:be,hiddenSegs:bf},bg)}if(bj==="popover"){bb.showSegPopover(a8,bh,be)}else{if(typeof bj==="string"){a9.calendar.zoomTo(bd,bj)}}})},showSegPopover:function(a8,bf,ba){var be=this;var a9=this.view;var bc=bf.parent();var bd;var bb;if(this.rowCnt==1){bd=a9.el}else{bd=this.rowEls.eq(a8.row)}bb={className:"fc-more-popover",content:this.renderSegPopoverContent(a8,ba),parentEl:this.el,top:bd.offset().top,autoHide:true,viewportConstrain:a9.opt("popoverViewportConstrain"),hide:function(){be.segPopover.destroy();be.segPopover=null;be.popoverSegs=null}};if(this.isRTL){bb.right=bc.offset().left+bc.outerWidth()+1}else{bb.left=bc.offset().left-1}this.segPopover=new k(bb);this.segPopover.show()},renderSegPopoverContent:function(a8,ba){var a9=this.view;var bf=a9.opt("theme");var be=a8.start.format(a9.opt("dayPopoverFormat"));var bd=aL('<div class="fc-header '+a9.widgetHeaderClass+'"><span class="fc-close '+(bf?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+a3(be)+'</span><div class="fc-clear"/></div><div class="fc-body '+a9.widgetContentClass+'"><div class="fc-event-container"></div></div>');var bc=bd.find(".fc-event-container");var bb;ba=this.renderFgSegEls(ba,true);this.popoverSegs=ba;for(bb=0;bb<ba.length;bb++){ba[bb].cell=a8;bc.append(ba[bb].el)}return bd},resliceDaySegs:function(ba,a8){var bc=aL.map(ba,function(be){return be.event});var a9=a8.clone().stripTime();var bd=a9.clone().add(1,"days");var bb={start:a9,end:bd};ba=this.eventsToSegs(bc,function(bf){var be=aJ(bf,bb);return be?[be]:[]});ba.sort(z);return ba},getMoreLinkText:function(a8){var a9=this.view.opt("eventLimitText");if(typeof a9==="function"){return a9(a8)}else{return"+"+a8+" "+a9}},getCellSegs:function(a8,bb){var bc=this.rowStructs[a8.row].segMatrix;var bd=bb||0;var ba=[];var a9;while(bd<bc.length){a9=bc[bd][a8.col];if(a9){ba.push(a9)}bd++}return ba}});var h=aB.extend({slotDuration:null,snapDuration:null,minTime:null,maxTime:null,axisFormat:null,dayEls:null,slatEls:null,slatTops:null,helperEl:null,businessHourSegs:null,constructor:function(){aB.apply(this,arguments);this.processOptions()},render:function(){this.el.html(this.renderHtml());this.dayEls=this.el.find(".fc-day");this.slatEls=this.el.find(".fc-slats tr");this.computeSlatTops();this.renderBusinessHours();aB.prototype.render.call(this)},renderBusinessHours:function(){var a8=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=this.renderFill("businessHours",this.eventsToSegs(a8),"bgevent")},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(a8){return this.bgCellHtml(a8)},slatRowHtml:function(){var a8=this.view;var bd=this.isRTL;var bc="";var bb=this.slotDuration.asMinutes()%15===0;var be=A.duration(+this.minTime);var a9;var ba;var bf;while(be<this.maxTime){a9=this.start.clone().time(be);ba=a9.minutes();bf='<td class="fc-axis fc-time '+a8.widgetContentClass+'" '+a8.axisStyleAttr()+">"+((!bb||!ba)?"<span>"+a3(a9.format(this.axisFormat))+"</span>":"")+"</td>";bc+="<tr "+(!ba?"":'class="fc-minor"')+">"+(!bd?bf:"")+'<td class="'+a8.widgetContentClass+'"/>'+(bd?bf:"")+"</tr>";be.add(this.slotDuration)}return bc},processOptions:function(){var a8=this.view;var ba=a8.opt("slotDuration");var a9=a8.opt("snapDuration");ba=A.duration(ba);a9=a9?A.duration(a9):ba;this.slotDuration=ba;this.snapDuration=a9;this.minTime=A.duration(a8.opt("minTime"));this.maxTime=A.duration(a8.opt("maxTime"));this.axisFormat=a8.opt("axisFormat")||a8.opt("smallTimeFormat")},computeColHeadFormat:function(){if(this.colCnt>1){return this.view.opt("dayOfMonthFormat")}else{return"dddd"}},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return true},updateCells:function(){var a8=this.view;var ba=[];var a9;a9=this.start.clone();while(a9.isBefore(this.end)){ba.push({day:a9.clone()});a9.add(1,"day");a9=a8.skipHiddenDays(a9)}if(this.isRTL){ba.reverse()}this.colData=ba;this.colCnt=ba.length;this.rowCnt=Math.ceil((this.maxTime-this.minTime)/this.snapDuration)},computeCellRange:function(a8){var ba=this.computeSnapTime(a8.row);var bb=this.view.calendar.rezoneDate(a8.day).time(ba);var a9=bb.clone().add(this.snapDuration);return{start:bb,end:a9}},getColEl:function(a8){return this.dayEls.eq(a8)},computeSnapTime:function(a8){return A.duration(this.minTime+this.snapDuration*a8)},rangeToSegs:function(bb){var bd=this.colCnt;var a9=[];var a8;var bc;var be;var ba;bb={start:bb.start.clone().stripZone(),end:bb.end.clone().stripZone()};for(bc=0;bc<bd;bc++){be=this.colData[bc].day;ba={start:be.clone().time(this.minTime),end:be.clone().time(this.maxTime)};a8=aJ(bb,ba);if(a8){a8.col=bc;a9.push(a8)}}return a9},resize:function(){this.computeSlatTops();this.updateSegVerticals()},computeRowCoords:function(){var bb=this.el.offset().top;var a8=[];var a9;var ba;for(a9=0;a9<this.rowCnt;a9++){ba={top:bb+this.computeTimeTop(this.computeSnapTime(a9))};if(a9>0){a8[a9-1].bottom=ba.top}a8.push(ba)}ba.bottom=ba.top+this.computeTimeTop(this.computeSnapTime(a9));return a8},computeDateTop:function(a8,a9){return this.computeTimeTop(A.duration(a8.clone().stripZone()-a9.clone().stripTime()))},computeTimeTop:function(bd){var bb=(bd-this.minTime)/this.slotDuration;var ba;var a9;var bc;var a8;bb=Math.max(0,bb);bb=Math.min(this.slatEls.length,bb);ba=Math.floor(bb);a9=bb-ba;bc=this.slatTops[ba];if(a9){a8=this.slatTops[ba+1];return bc+(a8-bc)*a9}else{return bc}},computeSlatTops:function(){var a9=[];var a8;this.slatEls.each(function(ba,bb){a8=aL(bb).position().top;a9.push(a8)});a9.push(a8+this.slatEls.last().outerHeight());this.slatTops=a9},renderDrag:function(ba,a8){var a9;if(a8){this.renderRangeHelper(ba,a8);a9=this.view.opt("dragOpacity");if(a9!==undefined){this.helperEl.css("opacity",a9)}return true}else{this.renderHighlight(this.view.calendar.ensureVisibleEventRange(ba))}},destroyDrag:function(){this.destroyHelper();this.destroyHighlight()},renderEventResize:function(a9,a8){this.renderRangeHelper(a9,a8)},destroyEventResize:function(){this.destroyHelper()},renderHelper:function(be,bc){var ba=this.eventsToSegs([be]);var a9;var bd,a8;var bb;ba=this.renderFgSegEls(ba);a9=this.renderSegTable(ba);for(bd=0;bd<ba.length;bd++){a8=ba[bd];if(bc&&bc.col===a8.col){bb=bc.el;a8.el.css({left:bb.css("left"),right:bb.css("right"),"margin-left":bb.css("margin-left"),"margin-right":bb.css("margin-right")})}}this.helperEl=aL('<div class="fc-helper-skeleton"/>').append(a9).appendTo(this.el)},destroyHelper:function(){if(this.helperEl){this.helperEl.remove();this.helperEl=null}},renderSelection:function(a8){if(this.view.opt("selectHelper")){this.renderRangeHelper(a8)}else{this.renderHighlight(a8)}},destroySelection:function(){this.destroyHelper();this.destroyHighlight()},renderFill:function(bh,a9,bg){var bd;var ba;var bj;var bb,bk;var bi;var bf;var a8;var be,bc;if(a9.length){a9=this.renderFillSegEls(bh,a9);bd=this.groupSegCols(a9);bg=bg||bh.toLowerCase();ba=aL('<div class="fc-'+bg+'-skeleton"><table><tr/></table></div>');bj=ba.find("tr");for(bb=0;bb<bd.length;bb++){bk=bd[bb];bi=aL("<td/>").appendTo(bj);if(bk.length){bf=aL('<div class="fc-'+bg+'-container"/>').appendTo(bi);a8=this.colData[bb].day;for(be=0;be<bk.length;be++){bc=bk[be];bf.append(bc.el.css({top:this.computeDateTop(bc.start,a8),bottom:-this.computeDateTop(bc.end,a8)}))}}}this.bookendCells(bj,bh);this.el.append(ba);this.elsByFill[bh]=ba}return a9}});h.mixin({eventSkeletonEl:null,renderFgSegs:function(a8){a8=this.renderFgSegEls(a8);this.el.append(this.eventSkeletonEl=aL('<div class="fc-content-skeleton"/>').append(this.renderSegTable(a8)));return a8},destroyFgSegs:function(a8){if(this.eventSkeletonEl){this.eventSkeletonEl.remove();this.eventSkeletonEl=null}},renderSegTable:function(a8){var ba=aL("<table><tr/></table>");var bf=ba.find("tr");var bb;var bd,bc;var a9,bg;var be;bb=this.groupSegCols(a8);this.computeSegVerticals(a8);for(a9=0;a9<bb.length;a9++){bg=bb[a9];aD(bg);be=aL('<div class="fc-event-container"/>');for(bd=0;bd<bg.length;bd++){bc=bg[bd];bc.el.css(this.generateSegPositionCss(bc));if(bc.bottom-bc.top<30){bc.el.addClass("fc-short")}be.append(bc.el)}bf.append(aL("<td/>").append(be))}this.bookendCells(bf,"eventSkeleton");return ba},updateSegVerticals:function(){var a8=(this.segs||[]).concat(this.businessHourSegs||[]);var a9;this.computeSegVerticals(a8);for(a9=0;a9<a8.length;a9++){a8[a9].el.css(this.generateSegVerticalCss(a8[a9]))}},computeSegVerticals:function(a9){var ba,a8;for(ba=0;ba<a9.length;ba++){a8=a9[ba];a8.top=this.computeDateTop(a8.start,a8.start);a8.bottom=this.computeDateTop(a8.end,a8.start)}},fgSegHtml:function(bf,ba){var bh=this.view;var a9=bf.event;var a8=bh.isEventDraggable(a9);var bc=!ba&&bf.isEnd&&bh.isEventResizable(a9);var be=this.getSegClasses(bf,a8,bc);var bi=this.getEventSkinCss(a9);var bd;var bg;var bb;be.unshift("fc-time-grid-event");if(bh.isMultiDayEvent(a9)){if(bf.isStart||bf.isEnd){bd=this.getEventTimeText(bf);bg=this.getEventTimeText(bf,"LT");bb=this.getEventTimeText({start:bf.start})}}else{bd=this.getEventTimeText(a9);bg=this.getEventTimeText(a9,"LT");bb=this.getEventTimeText({start:a9.start})}return'<a class="'+be.join(" ")+'"'+(a9.url?' href="'+a3(a9.url)+'"':"")+(bi?' style="'+bi+'"':"")+'><div class="fc-content">'+(bd&&!a9.hideTime?'<div class="fc-time" data-start="'+a3(bb)+'" data-full="'+a3(bg)+'"><span>'+a3(bd)+"</span></div>":"")+(a9.title?'<div class="fc-title">'+a3(a9.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(bc?'<div class="fc-resizer"/>':"")+"</a>"},generateSegPositionCss:function(a8){var bb=this.view.opt("slotEventOverlap");var a9=a8.backwardCoord;var ba=a8.forwardCoord;var bd=this.generateSegVerticalCss(a8);var be;var bc;if(bb){ba=Math.min(1,a9+(ba-a9)*2)}if(this.isRTL){be=1-ba;bc=a9}else{be=a9;bc=1-ba}bd.zIndex=a8.level+1;bd.left=be*100+"%";bd.right=bc*100+"%";if(bb&&a8.forwardPressure){bd[this.isRTL?"marginLeft":"marginRight"]=10*2}return bd},generateSegVerticalCss:function(a8){return{top:a8.top,bottom:-a8.bottom}},groupSegCols:function(a9){var a8=[];var ba;for(ba=0;ba<this.colCnt;ba++){a8.push([])}for(ba=0;ba<a9.length;ba++){a8[a9[ba].col].push(a9[ba])}return a8}});function aD(a8){var ba;var bb;var a9;a8.sort(z);ba=G(a8);an(ba);if((bb=ba[0])){for(a9=0;a9<bb.length;a9++){aw(bb[a9])}for(a9=0;a9<bb.length;a9++){R(bb[a9],0,0)}}}function G(a9){var bc=[];var bb,a8;var ba;for(bb=0;bb<a9.length;bb++){a8=a9[bb];for(ba=0;ba<bc.length;ba++){if(!a6(a8,bc[ba]).length){break}}a8.level=ba;(bc[ba]||(bc[ba]=[])).push(a8)}return bc}function an(bc){var bb,bd;var ba,a8;var a9;for(bb=0;bb<bc.length;bb++){bd=bc[bb];for(ba=0;ba<bd.length;ba++){a8=bd[ba];a8.forwardSegs=[];for(a9=bb+1;a9<bc.length;a9++){a6(a8,bc[a9],a8.forwardSegs)}}}}function aw(a9){var a8=a9.forwardSegs;var bc=0;var bb,ba;if(a9.forwardPressure===undefined){for(bb=0;bb<a8.length;bb++){ba=a8[bb];aw(ba);bc=Math.max(bc,1+ba.forwardPressure)}a9.forwardPressure=bc}}function R(a9,bb,bc){var a8=a9.forwardSegs;var ba;if(a9.forwardCoord===undefined){if(!a8.length){a9.forwardCoord=1}else{a8.sort(aP);R(a8[0],bb+1,bc);a9.forwardCoord=a8[0].backwardCoord}a9.backwardCoord=a9.forwardCoord-(a9.forwardCoord-bc)/(bb+1);for(ba=0;ba<a8.length;ba++){R(a8[ba],0,a9.forwardCoord)}}}function a6(a8,bb,ba){ba=ba||[];for(var a9=0;a9<bb.length;a9++){if(g(a8,bb[a9])){ba.push(bb[a9])}}return ba}function g(a9,a8){return a9.bottom>a8.top&&a9.top<a8.bottom}function aP(a9,a8){return a8.forwardPressure-a9.forwardPressure||(a9.backwardCoord||0)-(a8.backwardCoord||0)||z(a9,a8)}var a2=aZ.View=aS.extend({type:null,name:null,title:null,calendar:null,options:null,coordMap:null,el:null,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isSelected:false,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,constructor:function(ba,a9,a8){this.calendar=ba;this.options=a9;this.type=this.name=a8;this.nextDayThreshold=A.duration(this.opt("nextDayThreshold"));this.initTheming();this.initHiddenDays();this.documentMousedownProxy=aL.proxy(this,"documentMousedown");this.initialize()},initialize:function(){},opt:function(a8){var a9;a9=this.options[a8];if(a9!==undefined){return a9}a9=this.calendar.options[a8];if(aL.isPlainObject(a9)&&!ad(a8)){return I(a9,this.type)}return a9},trigger:function(a8,ba){var a9=this.calendar;return a9.trigger.apply(a9,[a8,ba||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(a8){this.setRange(this.computeRange(a8))},setRange:function(a8){aL.extend(this,a8);this.updateTitle()},computeRange:function(ba){var bb=A.duration(this.opt("duration")||this.constructor.duration||{days:1});var be=N(bb);var bc=ba.clone().startOf(be);var a9=bc.clone().add(bb);var bd,a8;if(/year|month|week|day/.test(be)){bc.stripTime();a9.stripTime()}else{if(!bc.hasTime()){bc=this.calendar.rezoneDate(bc)}if(!a9.hasTime()){a9=this.calendar.rezoneDate(a9)}}bd=bc.clone();bd=this.skipHiddenDays(bd);a8=a9.clone();a8=this.skipHiddenDays(a8,-1,true);return{intervalDuration:bb,intervalUnit:be,intervalStart:bc,intervalEnd:a9,start:bd,end:a8}},computePrevDate:function(a8){return this.massageCurrentDate(a8.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(a8){return this.massageCurrentDate(a8.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(a8,a9){if(this.intervalDuration<=A.duration({days:1})){if(this.isHiddenDay(a8)){a8=this.skipHiddenDays(a8,a9);a8.startOf("day")}}return a8},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.intervalStart,end:this.intervalEnd},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){if(this.intervalUnit=="year"){return"YYYY"}else{if(this.intervalUnit=="month"){return this.opt("monthYearFormat")}else{if(this.intervalDuration.as("days")>1){return"ll"}else{return"LL"}}}},formatRange:function(ba,a9,bb){var a8=ba.end;if(!a8.hasTime()){a8=a8.clone().subtract(1)}return P(ba.start,a8,a9,bb,this.opt("isRTL"))},renderView:function(){this.render();this.updateSize();this.initializeScroll();this.trigger("viewRender",this,this,this.el);aL(document).on("mousedown",this.documentMousedownProxy)},render:function(){},destroyView:function(){this.unselect();this.destroyViewEvents();this.destroy();this.trigger("viewDestroy",this,this,this.el);aL(document).off("mousedown",this.documentMousedownProxy)},destroy:function(){this.el.empty()},initTheming:function(){var a8=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=a8+"-widget-header";this.widgetContentClass=a8+"-widget-content";this.highlightStateClass=a8+"-state-highlight"},updateSize:function(a8){if(a8){this.recordScroll()}this.updateHeight();this.updateWidth()},updateWidth:function(){},updateHeight:function(){var a8=this.calendar;this.setHeight(a8.getSuggestedViewHeight(),a8.isHeightAuto())},setHeight:function(a9,a8){},computeScrollerHeight:function(a9,a8){var bb;var ba;a8=a8||this.scrollerEl;bb=this.el.add(a8);bb.css({position:"relative",left:-1});ba=this.el.outerHeight()-a8.height();bb.css({position:"",left:""});return a9-ba},initializeScroll:function(){},recordScroll:function(){if(this.scrollerEl){this.scrollTop=this.scrollerEl.scrollTop()}},restoreScroll:function(){if(this.scrollTop!==null){this.scrollerEl.scrollTop(this.scrollTop)}},renderViewEvents:function(a8){this.renderEvents(a8);this.eventSegEach(function(a9){this.trigger("eventAfterRender",a9.event,a9.event,a9.el)});this.trigger("eventAfterAllRender")},renderEvents:function(){},destroyViewEvents:function(){this.eventSegEach(function(a8){this.trigger("eventDestroy",a8.event,a8.event,a8.el)});this.destroyEvents()},destroyEvents:function(){},resolveEventEl:function(a9,a8){var ba=this.trigger("eventRender",a9,a9,a8);if(ba===false){a8=null}else{if(ba&&ba!==true){a8=aL(ba)}}return a8},showEvent:function(a8){this.eventSegEach(function(a9){a9.el.css("visibility","")},a8)},hideEvent:function(a8){this.eventSegEach(function(a9){a9.el.css("visibility","hidden")},a8)},eventSegEach:function(bb,ba){var a8=this.getEventSegs();var a9;for(a9=0;a9<a8.length;a9++){if(!ba||a8[a9].event._id===ba._id){bb.call(this,a8[a9])}}},getEventSegs:function(){return[]},isEventDraggable:function(a8){var a9=a8.source||{};return a5(a8.startEditable,a9.startEditable,this.opt("eventStartEditable"),a8.editable,a9.editable,this.opt("editable"))},reportEventDrop:function(bc,bb,a9,ba){var be=this.calendar;var bd=be.mutateEvent(bc,bb);var a8=function(){bd.undo();be.reportEventChange()};this.triggerEventDrop(bc,bd.dateDelta,a8,a9,ba);be.reportEventChange()},triggerEventDrop:function(bb,bc,a8,a9,ba){this.trigger("eventDrop",a9[0],bb,bc,a8,ba,{})},reportExternalDrop:function(bf,bc,a9,bb,be){var bd=bf.eventProps;var a8;var ba;if(bd){a8=aL.extend({},bd,bc);ba=this.calendar.renderEvent(a8,bf.stick)[0]}this.triggerExternalDrop(ba,bc,a9,bb,be)},triggerExternalDrop:function(bb,ba,a8,a9,bc){this.trigger("drop",a8[0],ba.start,a9,bc);if(bb){this.trigger("eventReceive",null,bb)}},renderDrag:function(a9,a8){},destroyDrag:function(){},isEventResizable:function(a8){var a9=a8.source||{};return a5(a8.durationEditable,a9.durationEditable,this.opt("eventDurationEditable"),a8.editable,a9.editable,this.opt("editable"))},reportEventResize:function(bc,bb,a9,ba){var be=this.calendar;var bd=be.mutateEvent(bc,{end:bb});var a8=function(){bd.undo();be.reportEventChange()};this.triggerEventResize(bc,bd.durationDelta,a8,a9,ba);be.reportEventChange()},triggerEventResize:function(bc,a9,a8,ba,bb){this.trigger("eventResize",ba[0],bc,a9,a8,bb,{})},select:function(a8,a9){this.unselect(a9);this.renderSelection(a8);this.reportSelection(a8,a9)},renderSelection:function(a8){},reportSelection:function(a8,a9){this.isSelected=true;this.trigger("select",null,a8.start,a8.end,a9)},unselect:function(a8){if(this.isSelected){this.isSelected=false;this.destroySelection();this.trigger("unselect",null,a8)}},destroySelection:function(){},documentMousedown:function(a8){var a9;if(this.isSelected&&this.opt("unselectAuto")&&W(a8)){a9=this.opt("unselectCancel");if(!a9||!aL(a8.target).closest(a9).length){this.unselect(a8)}}},initHiddenDays:function(){var a9=this.opt("hiddenDays")||[];var bb=[];var a8=0;var ba;if(this.opt("weekends")===false){a9.push(0,6)}for(ba=0;ba<7;ba++){if(!(bb[ba]=aL.inArray(ba,a9)!==-1)){a8++}}if(!a8){throw"invalid hiddenDays"}this.isHiddenDayHash=bb},isHiddenDay:function(a8){if(A.isMoment(a8)){a8=a8.day()}return this.isHiddenDayHash[a8]},skipHiddenDays:function(ba,bb,a8){var a9=ba.clone();bb=bb||1;while(this.isHiddenDayHash[(a9.day()+(a8?bb:0)+7)%7]){a9.add(bb,"days")}return a9},computeDayRange:function(a9){var bc=a9.start.clone().stripTime();var a8=a9.end;var bb=null;var ba;if(a8){bb=a8.clone().stripTime();ba=+a8.time();if(ba&&ba>=this.nextDayThreshold){bb.add(1,"days")}}if(!a8||bb<=bc){bb=bc.clone().add(1,"days")}return{start:bc,end:bb}},isMultiDayEvent:function(a9){var a8=this.computeDayRange(a9);return a8.end.diff(a8.start,"days")>1}});function q(br,bn){var bW=this;bn=bn||{};var bA=aW({},U,bn);var bN;if(bA.lang in aN){bN=aN[bA.lang]}else{bN=aN[U.lang]}if(bN){bA=aW({},U,bN,bn)}if(bA.isRTL){bA=aW({},U,ac,bN||{},bn)}bW.options=bA;bW.render=bK;bW.destroy=bY;bW.refetchEvents=bk;bW.reportEvents=bp;bW.reportEventChange=b1;bW.rerenderEvents=bg;bW.changeView=bx;bW.select=bX;bW.unselect=bj;bW.prev=bG;bW.next=bc;bW.prevYear=b0;bW.nextYear=a9;bW.today=bs;bW.gotoDate=bJ;bW.incrementDate=bv;bW.zoomTo=b5;bW.getDate=bw;bW.getCalendar=bQ;bW.getView=bE;bW.option=bT;bW.trigger=bI;bW.isValidViewType=bO;bW.getViewButtonText=by;var bM=S(aa(bA.lang));if(bA.monthNames){bM._months=bA.monthNames}if(bA.monthNamesShort){bM._monthsShort=bA.monthNamesShort}if(bA.dayNames){bM._weekdays=bA.dayNames}if(bA.dayNamesShort){bM._weekdaysShort=bA.dayNamesShort}if(bA.firstDay!=null){var bb=S(bM._week);bb.dow=bA.firstDay;bM._week=bb}bW.defaultAllDayEventDuration=A.duration(bA.defaultAllDayEventDuration);bW.defaultTimedEventDuration=A.duration(bA.defaultTimedEventDuration);bW.moment=function(){var b7;if(bA.timezone==="local"){b7=aZ.moment.apply(null,arguments);if(b7.hasTime()){b7.local()}}else{if(bA.timezone==="UTC"){b7=aZ.moment.utc.apply(null,arguments)}else{b7=aZ.moment.parseZone.apply(null,arguments)}}if("_locale" in b7){b7._locale=bM}else{b7._lang=bM}return b7};bW.getIsAmbigTimezone=function(){return bA.timezone!=="local"&&bA.timezone!=="UTC"};bW.rezoneDate=function(b7){return bW.moment(b7.toArray())};bW.getNow=function(){var b7=bA.now;if(typeof b7==="function"){b7=b7()}return bW.moment(b7)};bW.calculateWeekNumber=function(b8){var b7=bA.weekNumberCalculation;if(typeof b7==="function"){return b7(b8)}else{if(b7==="local"){return b8.week()}else{if(b7.toUpperCase()==="ISO"){return b8.isoWeek()}}}};bW.getEventEnd=function(b7){if(b7.end){return b7.end.clone()}else{return bW.getDefaultEventEnd(b7.allDay,b7.start)}};bW.getDefaultEventEnd=function(b8,b9){var b7=b9.clone();if(b8){b7.stripTime().add(bW.defaultAllDayEventDuration)}else{b7.add(bW.defaultTimedEventDuration)}if(bW.getIsAmbigTimezone()){b7.stripZone()}return b7};function bz(b7){return(b7.locale||b7.lang).call(b7,bA.lang).humanize()}p.call(bW,bA);var a8=bW.isFetchNeeded;var b4=bW.fetchEvents;var bU=br[0];var be;var bL;var bm;var b6;var bH={};var bl;var bh;var b3;var bV=0;var b2;var bC=[];if(bA.defaultDate!=null){b2=bW.moment(bA.defaultDate)}else{b2=bW.getNow()}function bK(b7){if(!bm){bB()}else{if(bS()){bP();bx(b7)}}}function bB(){b6=bA.theme?"ui":"fc";br.addClass("fc");if(bA.isRTL){br.addClass("fc-rtl")}else{br.addClass("fc-ltr")}if(bA.theme){br.addClass("ui-widget")}else{br.addClass("fc-unthemed")}bm=aL("<div class='fc-view-container'/>").prependTo(br);be=new af(bW,bA);bL=be.render();if(bL){br.prepend(bL)}bx(bA.defaultView);if(bA.handleWindowResize){b3=a7(bo,bA.windowResizeDelay);aL(window).resize(b3)}}function bY(){if(bl){bl.destroyView()}be.destroy();bm.remove();br.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget");aL(window).unbind("resize",b3)}function bS(){return br.is(":visible")}function bx(b7){bV++;if(bl&&b7&&bl.type!==b7){be.deactivateButton(bl.type);bd();if(bl.start){bl.destroyView()}bl.el.remove();bl=null}if(!bl&&b7){bl=bZ(b7);bl.el=aL("<div class='fc-view fc-"+b7+"-view' />").appendTo(bm);be.activateButton(b7)}if(bl){b2=bl.massageCurrentDate(b2);if(!bl.start||!b2.isWithin(bl.intervalStart,bl.intervalEnd)){if(bS()){bd();if(bl.start){bl.destroyView()}bl.setDate(b2);bl.renderView();bq();bD();bF();bi()}}}bq();bV--}function bZ(b7){var b8=ba(b7);return new b8["class"](bW,b8.options,b7)}function ba(cb){var cf=bA.defaultButtonText||{};var ch=bA.buttonText||{};var cc=bA.views||{};var cd=cb;var ce=[];var b7;var cg;var b8,cj,ca=false;var ci;if(bH[cb]){return bH[cb]}function b9(ck){if(typeof ck==="function"){cg=ck}else{if(typeof ck==="object"){aL.extend(b7,ck)}}}while(cd&&!cg){b7={};b9(az[cd]);b9(cc[cd]);ce.unshift(b7);cd=b7.type}ce.unshift({});b7=aL.extend.apply(aL,ce);if(cg){b8=b7.duration||cg.duration;if(b8){b8=A.duration(b8);cj=N(b8);ca=b8.as(cj)===1}if(ca&&cc[cj]){b7=aL.extend({},cc[cj],b7)}ci=ch[cb]||(ca?ch[cj]:null)||cf[cb]||(ca?cf[cj]:null)||b7.buttonText||cg.buttonText||(b8?bz(b8):null)||cb;return(bH[cb]={"class":cg,options:b7,buttonText:ci})}}function bO(b7){return Boolean(ba(b7))}function by(b7){var b8=ba(b7);if(b8){return b8.buttonText}}bW.getSuggestedViewHeight=function(){if(bh===undefined){bP()}return bh};bW.isHeightAuto=function(){return bA.contentHeight==="auto"||bA.height==="auto"};function bt(b7){if(bS()){if(b7){bf()}bV++;bl.updateSize(true);bV--;return true}}function bP(){if(bS()){bf()}}function bf(){if(typeof bA.contentHeight==="number"){bh=bA.contentHeight}else{if(typeof bA.height==="number"){bh=bA.height-(bL?bL.outerHeight(true):0)}else{bh=Math.round(bm.width()/Math.max(bA.aspectRatio,0.5))}}}function bo(b7){if(!bV&&b7.target===window&&bl.start){if(bt(true)){bl.trigger("windowResize",bU)}}}function bk(){bu();bR()}function bg(){if(bS()){bd();bl.destroyViewEvents();bl.renderViewEvents(bC);bq()}}function bu(){bd();bl.destroyViewEvents();bq()}function bi(){if(!bA.lazyFetching||a8(bl.start,bl.end)){bR()}else{bg()}}function bR(){b4(bl.start,bl.end)}function bp(b7){bC=b7;bg()}function b1(){bg()}function bD(){be.updateTitle(bl.title)}function bF(){var b7=bW.getNow();if(b7.isWithin(bl.intervalStart,bl.intervalEnd)){be.disableButton("today")}else{be.enableButton("today")}}function bX(b8,b7){b8=bW.moment(b8);if(b7){b7=bW.moment(b7)}else{if(b8.hasTime()){b7=b8.clone().add(bW.defaultTimedEventDuration)}else{b7=b8.clone().add(bW.defaultAllDayEventDuration)}}bl.select({start:b8,end:b7})}function bj(){if(bl){bl.unselect()}}function bG(){b2=bl.computePrevDate(b2);bx()}function bc(){b2=bl.computeNextDate(b2);bx()}function b0(){b2.add(-1,"years");bx()}function a9(){b2.add(1,"years");bx()}function bs(){b2=bW.getNow();bx()}function bJ(b7){b2=bW.moment(b7);bx()}function bv(b7){b2.add(A.duration(b7));bx()}function b5(b9,b7){var b8;var ca;if(!b7||!bO(b7)){b7=b7||"day";b8=be.getViewsWithButtons().join(" ");ca=b8.match(new RegExp("\\w+"+aR(b7)));if(!ca){ca=b8.match(/\w+Day/)}b7=ca?ca[0]:"agendaDay"}b2=b9;bx(b7)}function bw(){return b2.clone()}function bd(){bm.css({width:"100%",height:bm.height(),overflow:"hidden"})}function bq(){bm.css({width:"",height:"",overflow:""})}function bQ(){return bW}function bE(){return bl}function bT(b7,b8){if(b8===undefined){return bA[b7]}if(b7=="height"||b7=="contentHeight"||b7=="aspectRatio"){bA[b7]=b8;bt(true)}}function bI(b7,b8){if(bA[b7]){return bA[b7].apply(b8||bU,Array.prototype.slice.call(arguments,2))}}}function af(bd,bm){var bl=this;bl.render=a9;bl.destroy=bg;bl.updateTitle=be;bl.activateButton=a8;bl.deactivateButton=bj;bl.disableButton=bc;bl.enableButton=bf;bl.getViewsWithButtons=bb;var ba=aL();var bh=[];var bi;function a9(){var bn=bm.header;bi=bm.theme?"ui":"fc";if(bn){ba=aL("<div class='fc-toolbar'/>").append(bk("left")).append(bk("right")).append(bk("center")).append('<div class="fc-clear"/>');return ba}}function bg(){ba.remove()}function bk(bn){var bo=aL('<div class="fc-'+bn+'"/>');var bp=bm.header[bn];if(bp){aL.each(bp.split(" "),function(bq){var br=aL();var bs=true;var bt;aL.each(this.split(","),function(by,bE){var bB;var bv;var bx;var bD;var bC;var bA;var bu;var bw;var bz;if(bE=="title"){br=br.add(aL("<h2>&nbsp;</h2>"));bs=false}else{if(bd[bE]){bB=function(){bd[bE]()}}else{if(bd.isValidViewType(bE)){bB=function(){bd.changeView(bE)};bh.push(bE);bC=bd.getViewButtonText(bE)}}if(bB){bv=I(bm.themeButtonIcons,bE);bx=I(bm.buttonIcons,bE);bD=I(bm.defaultButtonText,bE);bA=I(bm.buttonText,bE);if(bC||bA){bu=a3(bC||bA)}else{if(bv&&bm.theme){bu="<span class='ui-icon ui-icon-"+bv+"'></span>"}else{if(bx&&!bm.theme){bu="<span class='fc-icon fc-icon-"+bx+"'></span>"}else{bu=a3(bD||bE)}}}bw=["fc-"+bE+"-button",bi+"-button",bi+"-state-default"];bz=aL('<button type="button" class="'+bw.join(" ")+'">'+bu+"</button>").click(function(){if(!bz.hasClass(bi+"-state-disabled")){bB();if(bz.hasClass(bi+"-state-active")||bz.hasClass(bi+"-state-disabled")){bz.removeClass(bi+"-state-hover")}}}).mousedown(function(){bz.not("."+bi+"-state-active").not("."+bi+"-state-disabled").addClass(bi+"-state-down")}).mouseup(function(){bz.removeClass(bi+"-state-down")}).hover(function(){bz.not("."+bi+"-state-active").not("."+bi+"-state-disabled").addClass(bi+"-state-hover")},function(){bz.removeClass(bi+"-state-hover").removeClass(bi+"-state-down")});br=br.add(bz)}}});if(bs){br.first().addClass(bi+"-corner-left").end().last().addClass(bi+"-corner-right").end()}if(br.length>1){bt=aL("<div/>");if(bs){bt.addClass("fc-button-group")}bt.append(br);bo.append(bt)}else{bo.append(br)}})}return bo}function be(bn){ba.find("h2").text(bn)}function a8(bn){ba.find(".fc-"+bn+"-button").addClass(bi+"-state-active")}function bj(bn){ba.find(".fc-"+bn+"-button").removeClass(bi+"-state-active")}function bc(bn){ba.find(".fc-"+bn+"-button").attr("disabled","disabled").addClass(bi+"-state-disabled")}function bf(bn){ba.find(".fc-"+bn+"-button").removeAttr("disabled").removeClass(bi+"-state-disabled")}function bb(){return bh}}aZ.sourceNormalizers=[];aZ.sourceFetchers=[];var n={dataType:"json",cache:false};var al=1;function p(bz){var bK=this;bK.isFetchNeeded=a8;bK.fetchEvents=bN;bK.addEventSource=bh;bK.removeEventSource=bb;bK.updateEvent=bF;bK.renderEvent=bq;bK.removeEvents=bL;bK.clientEvents=bj;bK.mutateEvent=a9;bK.normalizeEventDateProps=bC;bK.ensureVisibleEventRange=bw;var bD=bK.trigger;var bB=bK.getView;var bn=bK.reportEvents;var be={events:[]};var bH=[be];var bk,bo;var bO=0;var bu=0;var bQ=0;var bm=[];aL.each((bz.events?[bz.events]:[]).concat(bz.eventSources||[]),function(bR,bT){var bS=bv(bT);if(bS){bH.push(bS)}});function a8(bS,bR){return !bk||bS.clone().stripZone()<bk.clone().stripZone()||bR.clone().stripZone()>bo.clone().stripZone()}function bN(bV,bS){bk=bV;bo=bS;bm=[];var bU=++bO;var bR=bH.length;bu=bR;for(var bT=0;bT<bR;bT++){br(bH[bT],bU)}}function br(bS,bR){bf(bS,function(bX){var bW=aL.isArray(bS.events);var bV,bU;var bT;if(bR==bO){if(bX){for(bV=0;bV<bX.length;bV++){bU=bX[bV];if(bW){bT=bU}else{bT=bd(bU,bS)}if(bT){bm.push.apply(bm,bP(bT))}}}bu--;if(!bu){bn(bm)}}})}function bf(bR,b2){var bW;var b0=aZ.sourceFetchers;var bY;for(bW=0;bW<b0.length;bW++){bY=b0[bW].call(bK,bR,bk.clone(),bo.clone(),bz.timezone,b2);if(bY===true){return}else{if(typeof bY=="object"){bf(bY,b2);return}}}var b4=bR.events;if(b4){if(aL.isFunction(b4)){bg();b4.call(bK,bk.clone(),bo.clone(),bz.timezone,function(b6){b2(b6);bc()})}else{if(aL.isArray(b4)){b2(b4)}else{b2()}}}else{var bS=bR.url;if(bS){var b3=bR.success;var bZ=bR.error;var bT=bR.complete;var b5;if(aL.isFunction(bR.data)){b5=bR.data()}else{b5=bR.data}var bV=aL.extend({},b5||{});var bX=a5(bR.startParam,bz.startParam);var bU=a5(bR.endParam,bz.endParam);var b1=a5(bR.timezoneParam,bz.timezoneParam);if(bX){bV[bX]=bk.format()}if(bU){bV[bU]=bo.format()}if(bz.timezone&&bz.timezone!="local"){bV[b1]=bz.timezone}bg();aL.ajax(aL.extend({},n,bR,{data:bV,success:function(b7){b7=b7||[];var b6=O(b3,this,arguments);if(aL.isArray(b6)){b7=b6}b2(b7)},error:function(){O(bZ,this,arguments);b2()},complete:function(){O(bT,this,arguments);bc()}}))}else{b2()}}}function bh(bS){var bR=bv(bS);if(bR){bH.push(bR);bu++;br(bR,bO)}}function bv(bU){var bS=aZ.sourceNormalizers;var bT;var bR;if(aL.isFunction(bU)||aL.isArray(bU)){bT={events:bU}}else{if(typeof bU==="string"){bT={url:bU}}else{if(typeof bU==="object"){bT=aL.extend({},bU)}}}if(bT){if(bT.className){if(typeof bT.className==="string"){bT.className=bT.className.split(/\s+/)}}else{bT.className=[]}if(aL.isArray(bT.events)){bT.origArray=bT.events;bT.events=aL.map(bT.events,function(bV){return bd(bV,bT)})}for(bR=0;bR<bS.length;bR++){bS[bR].call(bK,bT)}return bT}}function bb(bR){bH=aL.grep(bH,function(bS){return !bJ(bS,bR)});bm=aL.grep(bm,function(bS){return !bJ(bS.source,bR)});bn(bm)}function bJ(bS,bR){return bS&&bR&&bl(bS)==bl(bR)}function bl(bR){return((typeof bR==="object")?(bR.origArray||bR.googleCalendarId||bR.url||bR.events):null)||bR}function bF(bR){bR.start=bK.moment(bR.start);if(bR.end){bR.end=bK.moment(bR.end)}else{bR.end=null}a9(bR,ba(bR));bn(bm)}function ba(bS){var bR={};aL.each(bS,function(bT,bU){if(bI(bT)){if(bU!==undefined&&aC(bU)){bR[bT]=bU}}});return bR}function bI(bR){return !/^_|^(id|allDay|start|end)$/.test(bR)}function bq(bV,bR){var bS=bd(bV);var bU;var bT,bW;if(bS){bU=bP(bS);for(bT=0;bT<bU.length;bT++){bW=bU[bT];if(!bW.source){if(bR){be.events.push(bW);bW.source=be}bm.push(bW)}}bn(bm);return bU}return[]}function bL(bT){var bS;var bR;if(bT==null){bT=function(){return true}}else{if(!aL.isFunction(bT)){bS=bT+"";bT=function(bU){return bU._id==bS}}}bm=aL.grep(bm,bT,true);for(bR=0;bR<bH.length;bR++){if(aL.isArray(bH[bR].events)){bH[bR].events=aL.grep(bH[bR].events,bT,true)}}bn(bm)}function bj(bR){if(aL.isFunction(bR)){return aL.grep(bm,bR)}else{if(bR!=null){bR+="";return aL.grep(bm,function(bS){return bS._id==bR})}}return bm}function bg(){if(!(bQ++)){bD("loading",null,true,bB())}}function bc(){if(!(--bQ)){bD("loading",null,false,bB())}}function bd(bS,bV){var bT={};var bW,bR;var bU;if(bz.eventDataTransform){bS=bz.eventDataTransform(bS)}if(bV&&bV.eventDataTransform){bS=bV.eventDataTransform(bS)}aL.extend(bT,bS);if(bV){bT.source=bV}bT._id=bS._id||(bS.id===undefined?"_fc"+al++:bS.id+"");if(bS.className){if(typeof bS.className=="string"){bT.className=bS.className.split(/\s+/)}else{bT.className=bS.className}}else{bT.className=[]}bW=bS.start||bS.date;bR=bS.end;if(M(bW)){bW=A.duration(bW)}if(M(bR)){bR=A.duration(bR)}if(bS.dow||A.isDuration(bW)||A.isDuration(bR)){bT.start=bW?A.duration(bW):null;bT.end=bR?A.duration(bR):null;bT._recurring=true}else{if(bW){bW=bK.moment(bW);if(!bW.isValid()){return false}}if(bR){bR=bK.moment(bR);if(!bR.isValid()){bR=null}}bU=bS.allDay;if(bU===undefined){bU=a5(bV?bV.allDayDefault:undefined,bz.allDayDefault)}bx(bW,bR,bU,bT)}return bT}function bx(bU,bR,bT,bS){bS.start=bU;bS.end=bR;bS.allDay=bT;bC(bS);av(bS)}function bC(bR){if(bR.allDay==null){bR.allDay=!(bR.start.hasTime()||(bR.end&&bR.end.hasTime()))}if(bR.allDay){bR.start.stripTime();if(bR.end){bR.end.stripTime()}}else{if(!bR.start.hasTime()){bR.start=bK.rezoneDate(bR.start)}if(bR.end&&!bR.end.hasTime()){bR.end=bK.rezoneDate(bR.end)}}if(bR.end&&!bR.end.isAfter(bR.start)){bR.end=null}if(!bR.end){if(bz.forceEventDuration){bR.end=bK.getDefaultEventEnd(bR.allDay,bR.start)}else{bR.end=null}}}function bw(bR){var bS;if(!bR.end){bS=bR.allDay;if(bS==null){bS=!bR.start.hasTime()}bR={start:bR.start,end:bK.getDefaultEventEnd(bS,bR.start)}}return bR}function bP(bY,b1,bU){var b3=[];var b0;var b2;var bX;var bV;var bT,bZ;var bS,bW;var bR;b1=b1||bk;bU=bU||bo;if(bY){if(bY._recurring){if((b2=bY.dow)){b0={};for(bX=0;bX<b2.length;bX++){b0[b2[bX]]=true}}bV=b1.clone().stripTime();while(bV.isBefore(bU)){if(!b0||b0[bV.day()]){bT=bY.start;bZ=bY.end;bS=bV.clone();bW=null;if(bT){bS=bS.time(bT)}if(bZ){bW=bV.clone().time(bZ)}bR=aL.extend({},bY);bx(bS,bW,!bT&&!bZ,bR);b3.push(bR)}bV.add(1,"days")}}else{b3.push(bY)}}return b3}function a9(bV,bU){var bT={};var bX;var bW;var bS;var bR;bU=bU||{};if(!bU.start){bU.start=bV.start.clone()}if(bU.end===undefined){bU.end=bV.end?bV.end.clone():null}if(bU.allDay==null){bU.allDay=bV.allDay}bC(bU);bX=bV._end!==null&&bU.end===null;if(bU.allDay){bW=V(bU.start,bV._start)}else{bW=u(bU.start,bV._start)}if(!bX&&bU.end){bS=u(bU.end,bU.start).subtract(u(bV._end||bK.getDefaultEventEnd(bV._allDay,bV._start),bV._start))}aL.each(bU,function(bY,bZ){if(bI(bY)){if(bZ!==undefined){bT[bY]=bZ}}});bR=bA(bj(bV._id),bX,bU.allDay,bW,bS,bT);return{dateDelta:bW,durationDelta:bS,undo:bR}}function bA(bV,bY,bX,bW,bT,bU){var bS=bK.getIsAmbigTimezone();var bR=[];if(bW&&!bW.valueOf()){bW=null}if(bT&&!bT.valueOf()){bT=null}aL.each(bV,function(b0,b2){var bZ;var b1;bZ={start:b2.start.clone(),end:b2.end?b2.end.clone():null,allDay:b2.allDay};aL.each(bU,function(b3){bZ[b3]=b2[b3]});b1={start:b2._start,end:b2._end,allDay:b2._allDay};if(bY){b1.end=null}b1.allDay=bX;bC(b1);if(bW){b1.start.add(bW);if(b1.end){b1.end.add(bW)}}if(bT){if(!b1.end){b1.end=bK.getDefaultEventEnd(b1.allDay,b1.start)}b1.end.add(bT)}if(bS&&!b1.allDay&&(bW||bT)){b1.start.stripZone();if(b1.end){b1.end.stripZone()}}aL.extend(b2,bU,b1);av(b2);bR.push(function(){aL.extend(b2,bZ);av(b2)})});return function(){for(var bZ=0;bZ<bR.length;bZ++){bR[bZ]()}}}bK.getBusinessHoursEvents=bp;function bp(){var bT=bz.businessHours;var bU={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"};var bR=bK.getView();var bS;if(bT){if(typeof bT==="object"){bS=aL.extend({},bU,bT)}else{bS=bU}}if(bS){return bP(bd(bS),bR.start,bR.end)}return[]}bK.isEventRangeAllowed=bt;bK.isSelectionRangeAllowed=bs;bK.isExternalDropRangeAllowed=bG;function bt(bS,bT){var bU=bT.source||{};var bV=a5(bT.constraint,bU.constraint,bz.eventConstraint);var bR=a5(bT.overlap,bU.overlap,bz.eventOverlap);bS=bw(bS);return by(bS,bV,bR,bT)}function bs(bR){return by(bR,bz.selectConstraint,bz.selectOverlap)}function bG(bR,bU){var bS;var bT;if(bU){bS=aL.extend({},bU,bR);bT=bP(bd(bS))[0]}if(bT){return bt(bR,bT)}else{bR=bw(bR);return bs(bR)}}function by(bX,bT,bZ,bS){var bR;var bU;var bW,bY;var bV;bX={start:bX.start.clone().stripZone(),end:bX.end.clone().stripZone()};if(bT!=null){bR=bE(bT);bU=false;for(bW=0;bW<bR.length;bW++){if(bi(bR[bW],bX)){bU=true;break}}if(!bU){return false}}for(bW=0;bW<bm.length;bW++){bY=bm[bW];if(bS&&bS._id===bY._id){continue}if(bM(bY,bX)){if(bZ===false){return false}else{if(typeof bZ==="function"&&!bZ(bY,bS)){return false}}if(bS){bV=a5(bY.overlap,(bY.source||{}).overlap);if(bV===false){return false}if(typeof bV==="function"&&!bV(bS,bY)){return false}}}}return true}function bE(bR){if(bR==="businessHours"){return bp()}if(typeof bR==="object"){return bP(bd(bR))}return bj(bR)}function bi(bU,bT){var bS=bU.start.clone().stripZone();var bR=bK.getEventEnd(bU).stripZone();return bT.start>=bS&&bT.end<=bR}function bM(bU,bT){var bS=bU.start.clone().stripZone();var bR=bK.getEventEnd(bU).stripZone();return bT.start<bR&&bT.end>bS}}function av(a8){a8._allDay=a8.allDay;a8._start=a8.start.clone();a8._end=a8.end?a8.end.clone():null}var y=az.basic=a2.extend({dayGrid:null,dayNumbersVisible:false,weekNumbersVisible:false,weekNumberWidth:null,headRowEl:null,initialize:function(){this.dayGrid=new aT(this);this.coordMap=this.dayGrid.coordMap},setRange:function(a8){a2.prototype.setRange.call(this,a8);this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit);this.dayGrid.setRange(a8)},computeRange:function(a9){var a8=a2.prototype.computeRange.call(this,a9);if(/year|month/.test(a8.intervalUnit)){a8.start.startOf("week");a8.start=this.skipHiddenDays(a8.start);if(a8.end.weekday()){a8.end.add(1,"week").startOf("week");a8.end=this.skipHiddenDays(a8.end,-1,true)}}return a8},render:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1;this.weekNumbersVisible=this.opt("weekNumbers");this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible;this.el.addClass("fc-basic-view").html(this.renderHtml());this.headRowEl=this.el.find("thead .fc-row");this.scrollerEl=this.el.find(".fc-day-grid-container");this.dayGrid.coordMap.containerEl=this.scrollerEl;this.dayGrid.el=this.el.find(".fc-day-grid");this.dayGrid.render(this.hasRigidRows())},destroy:function(){this.dayGrid.destroy();a2.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){if(this.weekNumbersVisible){return'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+a3(this.opt("weekNumberTitle"))+"</span></th>"}},numberIntroHtml:function(a8){if(this.weekNumbersVisible){return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.calendar.calculateWeekNumber(this.dayGrid.getCell(a8,0).start)+"</span></td>"}},dayIntroHtml:function(){if(this.weekNumbersVisible){return'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>"}},introHtml:function(){if(this.weekNumbersVisible){return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>"}},numberCellHtml:function(a8){var a9=a8.start;var ba;if(!this.dayNumbersVisible){return"<td/>"}ba=this.dayGrid.getDayClasses(a9);ba.unshift("fc-day-number");return'<td class="'+ba.join(" ")+'" data-date="'+a9.format()+'">'+a9.date()+"</td>"},weekNumberStyleAttr:function(){if(this.weekNumberWidth!==null){return'style="width:'+this.weekNumberWidth+'px"'}return""},hasRigidRows:function(){var a8=this.opt("eventLimit");return a8&&typeof a8!=="number"},updateWidth:function(){if(this.weekNumbersVisible){this.weekNumberWidth=K(this.el.find(".fc-week-number"))}},setHeight:function(ba,a8){var a9=this.opt("eventLimit");var bb;s(this.scrollerEl);am(this.headRowEl);this.dayGrid.destroySegPopover();if(a9&&typeof a9==="number"){this.dayGrid.limitRows(a9)}bb=this.computeScrollerHeight(ba);this.setGridHeight(bb,a8);if(a9&&typeof a9!=="number"){this.dayGrid.limitRows(a9)}if(!a8&&aY(this.scrollerEl,bb)){aX(this.headRowEl,j(this.scrollerEl));bb=this.computeScrollerHeight(ba);this.scrollerEl.height(bb);this.restoreScroll()}},setGridHeight:function(a9,a8){if(a8){c(this.dayGrid.rowEls)}else{H(this.dayGrid.rowEls,a9,true)}},renderEvents:function(a8){this.dayGrid.renderEvents(a8);this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},destroyEvents:function(){this.recordScroll();this.dayGrid.destroyEvents()},renderDrag:function(a9,a8){return this.dayGrid.renderDrag(a9,a8)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(a8){this.dayGrid.renderSelection(a8)},destroySelection:function(){this.dayGrid.destroySelection()}});aE({fixedWeekCount:true});var ax=az.month=y.extend({computeRange:function(a9){var a8=y.prototype.computeRange.call(this,a9);var ba;if(this.isFixedWeeks()){ba=Math.ceil(a8.end.diff(a8.start,"weeks",true));a8.end.add(6-ba,"weeks")}return a8},setGridHeight:function(a9,a8){a8=a8||this.opt("weekMode")==="variable";if(a8){a9*=this.rowCnt/6}H(this.dayGrid.rowEls,a9,!a8)},isFixedWeeks:function(){var a8=this.opt("weekMode");if(a8){return a8==="fixed"}return this.opt("fixedWeekCount")}});ax.duration={months:1};az.basicWeek={type:"basic",duration:{weeks:1}};az.basicDay={type:"basic",duration:{days:1}};aE({allDaySlot:true,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:true});var a=5;az.agenda=a2.extend({timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=new h(this);if(this.opt("allDaySlot")){this.dayGrid=new aT(this);this.coordMap=new E([this.dayGrid.coordMap,this.timeGrid.coordMap])}else{this.coordMap=this.timeGrid.coordMap}},setRange:function(a8){a2.prototype.setRange.call(this,a8);this.timeGrid.setRange(a8);if(this.dayGrid){this.dayGrid.setRange(a8)}},render:function(){this.el.addClass("fc-agenda-view").html(this.renderHtml());this.scrollerEl=this.el.find(".fc-time-grid-container");this.timeGrid.coordMap.containerEl=this.scrollerEl;this.timeGrid.el=this.el.find(".fc-time-grid");this.timeGrid.render();this.bottomRuleEl=aL('<hr class="'+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el);if(this.dayGrid){this.dayGrid.el=this.el.find(".fc-day-grid");this.dayGrid.render();this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()}this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},destroy:function(){this.timeGrid.destroy();if(this.dayGrid){this.dayGrid.destroy()}a2.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="'+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){var ba;var a9;var a8;var bb;if(this.opt("weekNumbers")){ba=this.timeGrid.getCell(0).start;a9=this.calendar.calculateWeekNumber(ba);a8=this.opt("weekNumberTitle");if(this.opt("isRTL")){bb=a9+a8}else{bb=a8+a9}return'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+a3(bb)+"</span></th>"}else{return'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"}},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||a3(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){if(this.axisWidth!==null){return'style="width:'+this.axisWidth+'px"'}return""},updateSize:function(a8){if(a8){this.timeGrid.resize()}a2.prototype.updateSize.call(this,a8)},updateWidth:function(){this.axisWidth=K(this.el.find(".fc-axis"))},setHeight:function(ba,a8){var a9;var bb;if(this.bottomRuleHeight===null){this.bottomRuleHeight=this.bottomRuleEl.outerHeight()}this.bottomRuleEl.hide();this.scrollerEl.css("overflow","");s(this.scrollerEl);am(this.noScrollRowEls);if(this.dayGrid){this.dayGrid.destroySegPopover();a9=this.opt("eventLimit");if(a9&&typeof a9!=="number"){a9=a}if(a9){this.dayGrid.limitRows(a9)}}if(!a8){bb=this.computeScrollerHeight(ba);if(aY(this.scrollerEl,bb)){aX(this.noScrollRowEls,j(this.scrollerEl));bb=this.computeScrollerHeight(ba);this.scrollerEl.height(bb);this.restoreScroll()}else{this.scrollerEl.height(bb).css("overflow","hidden");this.bottomRuleEl.show()}}},initializeScroll:function(){var bb=this;var ba=A.duration(this.opt("scrollTime"));var a9=this.timeGrid.computeTimeTop(ba);a9=Math.ceil(a9);if(a9){a9++}function a8(){bb.scrollerEl.scrollTop(a9)}a8();setTimeout(a8,0)},renderEvents:function(a9){var bc=[];var ba=[];var bd=[];var bb;var a8;for(a8=0;a8<a9.length;a8++){if(a9[a8].allDay){bc.push(a9[a8])}else{ba.push(a9[a8])}}bb=this.timeGrid.renderEvents(ba);if(this.dayGrid){bd=this.dayGrid.renderEvents(bc)}this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},destroyEvents:function(){this.recordScroll();this.timeGrid.destroyEvents();if(this.dayGrid){this.dayGrid.destroyEvents()}},renderDrag:function(a9,a8){if(a9.start.hasTime()){return this.timeGrid.renderDrag(a9,a8)}else{if(this.dayGrid){return this.dayGrid.renderDrag(a9,a8)}}},destroyDrag:function(){this.timeGrid.destroyDrag();if(this.dayGrid){this.dayGrid.destroyDrag()}},renderSelection:function(a8){if(a8.start.hasTime()||a8.end.hasTime()){this.timeGrid.renderSelection(a8)}else{if(this.dayGrid){this.dayGrid.renderSelection(a8)}}},destroySelection:function(){this.timeGrid.destroySelection();if(this.dayGrid){this.dayGrid.destroySelection()}}});az.agendaWeek={type:"agenda",duration:{weeks:1}};az.agendaDay={type:"agenda",duration:{days:1}};aE({yearColumns:2,fixedWeekCount:5});az.year=a2.extend({dayNumbersVisible:true,weekNumbersVisible:false,weekNumberWidth:null,table:null,body:null,bodyRows:null,subTables:null,bodyCells:null,daySegmentContainer:null,colCnt:null,rowCnt:null,dayGrids:[],rtl:null,dis:null,dit:null,firstDay:null,firstMonth:null,lastMonth:null,yearColumns:2,nbMonths:null,hiddenMonths:[],nwe:null,tm:null,colFormat:null,dayGrid:null,coordMap:null,otherMonthDays:[],rowsForMonth:[],initialize:function(){this.updateOptions();this.dayGrid=new aT(this);this.dayGrids[0]=this.dayGrid;this.coordMap=this.dayGrid.coordMap},updateOptions:function(){this.rtl=this.opt("isRTL");if(this.rtl){this.dis=-1;this.dit=this.colCnt-1}else{this.dis=1;this.dit=0}this.firstDay=parseInt(this.opt("firstDay"),10);this.firstMonth=parseInt(this.opt("firstMonth"),10)||0;this.lastMonth=this.opt("lastMonth")||this.firstMonth+12;this.hiddenMonths=this.opt("hiddenMonths")||[];this.yearColumns=parseInt(this.opt("yearColumns"),10)||2;this.colFormat=this.opt("columnFormat");this.weekNumbersVisible=this.opt("weekNumbers");this.nwe=this.opt("weekends")?0:1;this.tm=this.opt("theme")?"ui":"fc";this.nbMonths=this.lastMonth-this.firstMonth;this.lastMonth=this.lastMonth%12;this.lang=this.opt("lang")},computeTitle:function(){if(this.opt("yearTitleFormat")!==null){var a9=this.intervalStart.locale(this.lang).format(this.opt("yearTitleFormat"));var a8=this.intervalStart.clone().add(this.nbMonths-1,"months");if(a8.year()!=this.intervalStart.year()){a9+=this.intervalEnd.format(" - YYYY")}return a9}else{return this.formatRange({start:this.intervalStart,end:this.intervalEnd},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))}},render:function(bb){var a8=Math.floor(this.intervalStart.month()/this.nbMonths)*this.nbMonths;if(!a8&&this.firstMonth>0&&!this.opt("lastMonth")){a8=(this.firstMonth+a8)%12}this.intervalStart=aZ.moment([this.intervalStart.year(),a8,1]);this.intervalEnd=this.intervalStart.clone().add(this.nbMonths,"months").add(-15,"minutes");this.start=this.intervalStart.clone();this.start=this.skipHiddenDays(this.start);this.start.startOf("week");this.start=this.skipHiddenDays(this.start);this.end=this.intervalEnd.clone();this.end=this.skipHiddenDays(this.end,-1,true);this.end.add((7-this.end.weekday())%7,"days");this.end=this.skipHiddenDays(this.end,-1,true);var ba=parseInt(this.opt("yearColumns"),10);var a9=this.opt("weekends")?7:5;this.renderYear(ba,a9,true)},renderYear:function(a9,a8,ba){this.colCnt=a8;var bb=!this.table;if(!bb){this.destroyEvents();this.table.remove()}this.buildSkeleton(this.yearColumns,ba);this.buildDayGrids();this.updateCells()},setRange:function(a8){a2.prototype.setRange.call(this,a8)},computeRange:function(a9){this.constructor.duration={months:this.nbMonths||12};var a8=a2.prototype.computeRange.call(this,a9);if(/year|month/.test(a8.intervalUnit)){a8.start.startOf("week");a8.start=this.skipHiddenDays(a8.start);if(a8.end.weekday()){a8.end.add(1,"week").startOf("week");a8.end=this.skipHiddenDays(a8.end,-1,true)}}return a8},buildSkeleton:function(bk,bm){var bd,ba,bl,be=0,bf=0;var bc=this.intervalStart.year();var bo,a9=this.tm+"-widget-header";var bg=[];this.rowCnt=0;for(ba=0;ba<7;ba++){bg[ba]=aZ.moment([2013,11,1+ba]).locale(this.lang).format("ddd")}bo='<table class="fc-year-main-table fc-border-separate" style="width:100%;"><tr>';bo+='<td class="fc-year-month-border fc-first"></td>';for(ba=0;ba<this.nbMonths;ba++){var bb=(this.intervalStart.month()+ba);var a8=(aL.inArray((bb%12),this.hiddenMonths)!=-1);var bj=(a8?"display:none;":"");var bi=aZ.moment([bc+(bb/12),(bb%12),1]).locale(this.lang);var bn=aR(bi.format("MMMM"));var bh=bi.format("YYYYMM");bl=bi.year();if(this.firstMonth+this.nbMonths>12){bn=bn+" "+bl}if((ba%bk)===0&&ba>0&&!a8){bf++;bo+='<td class="fc-year-month-border fc-last"></td></tr><tr><td class="fc-year-month-border fc-first"></td>'}if((ba%bk)<bk&&(ba%bk)>0&&!a8){bo+='<td class="fc-year-month-separator"></td>'}bo+='<td class="fc-year-monthly-td" style="'+bj+'">';bo+='<div class="fc-year-monthly-name'+(bf===0?" fc-first":"")+'"><a name="'+bh+'" data-year="'+bl+'" data-month="'+bb+'" href="#">'+a3(bn)+"</a></div>";bo+='<div class="fc-row '+a9+'">';bo+='<table class="fc-year-month-header"><thead><tr class="fc-year-week-days">';bo+=this.headIntroHtml();for(bd=this.firstDay;bd<(this.colCnt+this.firstDay);bd++){bo+='<th class="fc-day-header fc-year-weekly-head fc-'+ab[bd%7]+" "+a9+'">'+bg[bd%7]+"</th>"}bo+="</tr><tr></tr></thead></table>";bo+="</div>";bo+='<div class="fc-day-grid-container"><div class="fc-day-grid">';bo+="</div></div>";bo+='<div class="fc-year-monthly-footer"></div>';bo+="</td>";if(a8){be++}}bo+='<td class="fc-year-month-border fc-last"></td>';bo+="</tr></table>";this.table=aL(bo).appendTo(this.el);this.bodyRows=this.table.find(".fc-day-grid .fc-week");this.bodyCells=this.bodyRows.find("td.fc-day");this.bodyFirstCells=this.bodyCells.filter(":first-child");this.subTables=this.table.find("td.fc-year-monthly-td");this.head=this.table.find("thead");this.head.find("tr.fc-year-week-days th.fc-year-weekly-head:first").addClass("fc-first");this.head.find("tr.fc-year-week-days th.fc-year-weekly-head:last").addClass("fc-last");this.table.find(".fc-year-monthly-name a").click(this.calendar,function(bp){bp.data.changeView("month");bp.data.gotoDate([aL(this).attr("data-year"),aL(this).attr("data-month"),1])});this.dayBind(this.bodyCells);this.daySegmentContainer=aL('<div style="position:absolute;z-index:8;top:0;left:0;"/>').appendTo(this.table)},buildDayGrids:function(){var a8=this;var bb=[];for(var a9=0;a9<this.nbMonths;a9++){bb.push(a9+this.intervalStart.month())}var ba=a8.intervalStart.clone().add(7,"days");a8.dayGrids=[];aL.each(bb,function(bh,bc){var be=new aT(a8);var bg=a8.tableByOffset(bh);var bd=ba.clone().add(bh,"months");be.headRowEl=bg.find(".fc-row:first");be.scrollerEl=bg.find(".fc-day-grid-container");be.coordMap.containerEl=be.scrollerEl;be.el=bg.find(".fc-day-grid");be.offset=bh;be.rowData=[];be.colData=[];var bf=a8.computeMonthRange(bd);be.start=bf.start;be.end=bf.end;be.breakOnWeeks=true;be.updateCells();a8.dayNumbersVisible=be.rowCnt>1;be.numbersVisible=a8.dayNumbersVisible||a8.weekNumbersVisible;aT.prototype.render.call(be,a8.hasRigidRows());a8.dayGrids.push(be)});a8.dayGrid=a8.dayGrids[0];a8.coordMap=a8.dayGrid.coordMap},isFixedWeeks:function(){var a8=this.opt("weekMode");if(a8){return a8==="fixed"}return this.opt("fixedWeekCount")},computeMonthRange:function(a9){this.constructor.duration={months:1};var a8=a2.prototype.computeRange.call(this,a9);if(/year|month/.test(a8.intervalUnit)){a8.start.startOf("week");a8.start=this.skipHiddenDays(a8.start);if(a8.end.weekday()){a8.end.add(1,"week").startOf("week");a8.end=this.skipHiddenDays(a8.end,-1,true)}var ba=Math.ceil(a8.end.diff(a8.start,"weeks",true));if(this.isFixedWeeks()===5){if(ba==4){a8.end.add(1,"weeks")}}else{if(this.isFixedWeeks()){if(ba<=6){a8.end.add(6-ba,"weeks")}}}}return a8},destroy:function(){aL.each(this.dayGrids,function(a9,a8){a8.destroy()});a2.prototype.destroy.call(this)},updateCells:function(){var a8=this;this.subTables.find(".fc-week:first").addClass("fc-first");this.subTables.find(".fc-week:last").addClass("fc-last");this.subTables.find(".fc-bg").find("td.fc-day:last").addClass("fc-last");this.subTables.each(function(bc,bd){if(!a8.curYear){a8.curYear=a8.intervalStart}var be=a8.curYear.clone();var bb=(bc+a8.intervalStart.month())%12;be=a8.dayGrids[bc].start;var ba=0;aL(bd).find(".fc-bg").find("td.fc-day:first").addClass("fc-first");a8.otherMonthDays[bb]=[0,0,0,0];aL(bd).find(".fc-content-skeleton tr").each(function(bg,bf){if(bg===0&&a8.dateInMonth(be,bb)){a8.otherMonthDays[bb][2]=be.date()-1}aL(bf).find("td").not(".fc-week-number").each(function(bi,bj){var bh=aL(bj);be=a8.dayGrids[bc].cellDates[bi+bg*a8.colCnt];be._d.setDate(be._d.getDate(be)+a8.firstDay);if(!a8.dateInMonth(be,bb)){bh.addClass("fc-other-month");if(be.month()==(bb+11)%12){a8.otherMonthDays[bb][0]++;bh.addClass("fc-prev-month")}else{a8.otherMonthDays[bb][1]++;bh.addClass("fc-next-month")}}else{ba=be}})});var a9=a8.daysInMonth(a8.curYear.year(),bb+1)-ba;a8.otherMonthDays[bb][3]=a9});a8.bodyRows.filter(".fc-year-have-event").removeClass("fc-year-have-event")},headIntroHtml:function(){if(this.weekNumbersVisible){return'<th class="fc-week-number-head '+this.widgetHeaderClass+'"><span>'+a3(this.opt("weekNumberTitle"))+"</span></th>"}else{return""}},numberIntroHtml:function(a9,a8){if(this.weekNumbersVisible){a8=a8||this.dayGrid;return'<td class="fc-week-number" '+this.weekNumberStyleAttr("")+"><span>"+this.calendar.calculateWeekNumber(a8.getCell(a9,0).start)+"</span></td>"}else{return""}},dayIntroHtml:function(){if(this.weekNumbersVisible){return'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr("")+"></td>"}else{return""}},introHtml:function(){if(this.weekNumbersVisible){return'<td class="fc-week-number" '+this.weekNumberStyleAttr("")+"></td>"}else{return""}},weekNumberStyleAttr:function(){var a8="";if(this.weekNumberWidth!==null){a8='style="width:'+this.weekNumberWidth+'px;"'}return a8},numberCellHtml:function(a8){if(!this.dayNumbersVisible){return"<td/>"}var a9=a8.start;a9._d.setDate(a9._d.getDate(a9)+this.firstDay);var ba=this.dayGrid.getDayClasses(a9);ba.unshift("fc-day-number");return'<td class="'+ba.join(" ")+'" data-date="'+a9.format()+'">'+a9.date()+"</td>"},hasRigidRows:function(){var a8=this.opt("eventLimit");return a8&&typeof a8!=="number"},cellsForMonth:function(a8){return this.rowsForMonth[a8]*(this.nwe?5:7)},addDays:function(a9,a8){a9.add(a8,"days")},skipWeekend:function(a8,a9,ba){a9=a9||1;while(!a8.day()||(ba&&a8.day()==1||!ba&&a8.day()==6)){this.addDays(a8,a9)}return a8},daysInMonth:function(a8,a9){return aZ.moment([a8,a9,0]).date()},dateInMonth:function(a9,a8){return(a9.month()==(a8%12))},rowToGridOffset:function(ba){var a9=0;for(var a8=this.firstMonth;a8<this.lastMonth;a8++){a9+=this.rowsForMonth[a8];if(ba<a9){return(a8-this.firstMonth)}}return -1},rowToGridRow:function(ba){var a9=0;for(var a8=this.firstMonth;a8<this.lastMonth;a8++){a9+=this.rowsForMonth[a8];if(ba<a9){return ba-(a9-this.rowsForMonth[a8])}}return -1},tableByOffset:function(a8){return aL(this.subTables[a8])},setGridHeight:function(a9,a8,ba){if(typeof(ba)!="undefined"){if(a8){c(ba.rowEls)}else{H(ba.rowEls,a9,true)}return}aL.each(this.dayGrids,function(bc,bb){if(a8){c(bb.rowEls)}else{H(bb.rowEls,a9,true)}})},computeScrollerHeight:function(a9,a8){var bb;var ba;a8=a8||this.scrollerEl;var bc=a8.closest(".fc-year-monthly-td");bb=bc.add(a8);bb.css({position:"relative",left:-1});ba=bc.outerHeight()-a8.height();bb.css({position:"",left:""});return a9-ba},setHeight:function(bb,a8){var a9=this;var ba=this.opt("eventLimit");var bc;aL.each(this.dayGrids,function(be,bd){if(bd.el.length>0){s(bd.scrollerEl);am(bd.headRowEl);bd.destroySegPopover();if(ba&&typeof ba==="number"){bd.limitRows(ba)}if(!bc){bc=a9.computeScrollerHeight(bb,bd.scrollerEl)}a9.setGridHeight(bc,a8,bd);if(ba&&typeof ba!=="number"){bd.limitRows(ba)}if(!a8&&aY(bd.scrollerEl,bc)){aX(bd.headRowEl,j(bd.scrollerEl));bc=a9.computeScrollerHeight(bb,bd.scrollerEl);bd.scrollerEl.height(bc);a9.restoreScroll()}}})},updateWidth:function(){if(this.weekNumbersVisible){this.weekNumberWidth=K(this.el.find(".fc-week-number"));if(this.weekNumberWidth){this.el.find(".fc-week-number-head").width(this.weekNumberWidth+2)}}},updateHeight:function(){var a9=this.calendar;if(this.yearColumns>0){var a8=a9.getSuggestedViewHeight()*(1.1/(0.01+this.yearColumns));this.setHeight(a8,a9.isHeightAuto())}},dayBind:function(a8){a8.click(this.dayClick)},dayClick:function(ba){if(!this.opt("selectable")){var a9=this.className.match(/fc\-day\-(\d+)\-(\d+)\-(\d+)/);var a8=new Date(a9[1],a9[2]-1,a9[3]);aL.trigger("dayClick",this,aZ.moment(a8),true,ba)}},renderEvents:function(a8){aL.each(this.dayGrids,function(ba,a9){a9.renderEvents(a8)});this.updateHeight()},getEventSegs:function(){var a8=[];aL.each(this.dayGrids,function(bc,a9){var ba=a9.getEventSegs();for(var bb=0;bb<ba.length;bb++){a8.push(ba[bb])}});return a8},destroyEvents:function(){this.recordScroll();aL.each(this.dayGrids,function(a9,a8){a8.destroyEvents()})},renderDrag:function(ba,a8){var a9=false;aL.each(this.dayGrids,function(bc,bb){bb.renderDrag(ba,a8)});return a9},destroyDrag:function(){aL.each(this.dayGrids,function(a9,a8){a8.destroyDrag()})},renderSelection:function(a8,a9){aL.each(this.dayGrids,function(bb,ba){if(ba!==a9&&(ba.start<=a8.end||ba.end>=a8.start)){ba.renderSelection(a8)}})},destroySelection:function(){aL.each(this.dayGrids,function(a9,a8){a8.destroySelection()})}})});